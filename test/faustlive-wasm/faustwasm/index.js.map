{
  "version": 3,
  "sources": ["../../node_modules/js-sha256/src/sha256.js", "../../src/fetchModule.ts", "../../src/instantiateFaustModule.ts", "../../src/FaustAudioWorkletProcessor.ts", "../../src/FaustCompiler.ts", "../../src/FaustDspInstance.ts", "../../src/FaustWasmInstantiator.ts", "../../src/FaustOfflineProcessor.ts", "../../src/FaustSvgDiagrams.ts", "../../src/LibFaust.ts", "../../src/WavEncoder.ts", "../../src/WavDecoder.ts", "../../src/FaustWebAudioDsp.ts", "../../src/FaustAudioWorkletNode.ts", "../../src/FaustScriptProcessorNode.ts", "../../src/FaustDspGenerator.ts", "../../src/index.ts"],
  "sourcesContent": ["/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.9.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n      HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n      HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n      HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >> 28) & 0x0F] + HEX_CHARS[(h5 >> 24) & 0x0F] +\n      HEX_CHARS[(h5 >> 20) & 0x0F] + HEX_CHARS[(h5 >> 16) & 0x0F] +\n      HEX_CHARS[(h5 >> 12) & 0x0F] + HEX_CHARS[(h5 >> 8) & 0x0F] +\n      HEX_CHARS[(h5 >> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >> 28) & 0x0F] + HEX_CHARS[(h6 >> 24) & 0x0F] +\n      HEX_CHARS[(h6 >> 20) & 0x0F] + HEX_CHARS[(h6 >> 16) & 0x0F] +\n      HEX_CHARS[(h6 >> 12) & 0x0F] + HEX_CHARS[(h6 >> 8) & 0x0F] +\n      HEX_CHARS[(h6 >> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >> 28) & 0x0F] + HEX_CHARS[(h7 >> 24) & 0x0F] +\n        HEX_CHARS[(h7 >> 20) & 0x0F] + HEX_CHARS[(h7 >> 16) & 0x0F] +\n        HEX_CHARS[(h7 >> 12) & 0x0F] + HEX_CHARS[(h7 >> 8) & 0x0F] +\n        HEX_CHARS[(h7 >> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF,\n      (h5 >> 24) & 0xFF, (h5 >> 16) & 0xFF, (h5 >> 8) & 0xFF, h5 & 0xFF,\n      (h6 >> 24) & 0xFF, (h6 >> 16) & 0xFF, (h6 >> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >> 24) & 0xFF, (h7 >> 16) & 0xFF, (h7 >> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >> 12));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >> 18));\n          bytes[index++] = (0x80 | ((code >> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n", "const global: Window & { fetchModuleCache?: Map<string, any>; module: any; exports: any } = globalThis as any;\n\nconst cache = global.fetchModuleCache || new Map();\n\nconst fetchModule = async (url: string) => {\n\tconst absoluteUrl = new URL(url, location.href).href;\n\tif (cache.has(absoluteUrl)) return cache.get(absoluteUrl);\n\tlet exported: any;\n\tconst toExport = {};\n\tglobal.exports = toExport;\n\tglobal.module = { exports: toExport };\n\tconst esm = await import(/* webpackIgnore: true */absoluteUrl);\n\tconst esmKeys = Object.keys(esm);\n\tif (esmKeys.length) exported = esm;\n\telse exported = global.module.exports;\n\tdelete global.exports;\n\tdelete global.module;\n\tcache.set(absoluteUrl, exported);\n\treturn exported;\n};\n\nif (!global.fetchModuleCache) global.fetchModuleCache = cache;\n\nexport default fetchModule;\n", "import fetchModule from \"./fetchModule\";\nimport type { FaustModuleFactory } from \"./types\";\n\n/**\n * Load libfaust-wasm files, than instantiate libFaust\n * @param jsFile path to `libfaust-wasm.js`\n * @param dataFile path to `libfaust-wasm.data`\n * @param wasmFile path to `libfaust-wasm.wasm`\n */\nconst instantiateFaustModule = async (jsFile: string, dataFile = jsFile.replace(/c?js$/, \"data\"), wasmFile = jsFile.replace(/c?js$/, \"wasm\")) => {\n    let LibFaust: FaustModuleFactory;\n    try {\n        LibFaust = require(jsFile);\n    } catch (error) {\n        LibFaust = await fetchModule(jsFile);\n    }\n    const locateFile = (url: string, scriptDirectory: string) => ({\n        \"libfaust-wasm.wasm\": wasmFile,\n        \"libfaust-wasm.data\": dataFile\n    }[url]) || scriptDirectory + url;\n    const libFaust = await LibFaust({ locateFile });\n    return libFaust;\n};\n\nexport default instantiateFaustModule;\n", "import type FaustWasmInstantiator from \"./FaustWasmInstantiator\";\nimport type { FaustBaseWebAudioDsp, FaustWebAudioDspVoice, FaustMonoWebAudioDsp, FaustPolyWebAudioDsp } from \"./FaustWebAudioDsp\";\nimport type { AudioParamDescriptor, AudioWorkletGlobalScope, LooseFaustDspFactory, FaustDspMeta, FaustUIItem } from \"./types\";\n\n/**\n * Injected in the string to be compiled on AudioWorkletProcessor side\n */\nexport interface FaustData {\n    dspName: string;\n    dspMeta: FaustDspMeta;\n    poly: boolean;\n    effectMeta?: FaustDspMeta;\n};\nexport interface FaustAudioWorkletProcessorDependencies<Poly extends boolean = false> {\n    FaustBaseWebAudioDsp: typeof FaustBaseWebAudioDsp;\n    FaustMonoWebAudioDsp: Poly extends true ? undefined : typeof FaustMonoWebAudioDsp;\n    FaustPolyWebAudioDsp: Poly extends true ? typeof FaustPolyWebAudioDsp : undefined;\n    FaustWebAudioDspVoice: Poly extends true ? undefined : typeof FaustWebAudioDspVoice;\n    FaustWasmInstantiator: typeof FaustWasmInstantiator;\n}\nexport interface FaustAudioWorkletNodeOptions<Poly extends boolean = false> extends AudioWorkletNodeOptions {\n    processorOptions: Poly extends true ? FaustPolyAudioWorkletProcessorOptions : FaustMonoAudioWorkletProcessorOptions;\n}\n\nexport interface FaustMonoAudioWorkletNodeOptions extends AudioWorkletNodeOptions {\n    processorOptions: FaustMonoAudioWorkletProcessorOptions;\n}\n\nexport interface FaustPolyAudioWorkletNodeOptions extends AudioWorkletNodeOptions {\n    processorOptions: FaustPolyAudioWorkletProcessorOptions;\n}\n\nexport interface FaustAudioWorkletProcessorOptions {\n    name: string;\n    sampleSize: number;\n}\nexport interface FaustMonoAudioWorkletProcessorOptions extends FaustAudioWorkletProcessorOptions {\n    factory: LooseFaustDspFactory;\n}\nexport interface FaustPolyAudioWorkletProcessorOptions extends FaustAudioWorkletProcessorOptions {\n    voiceFactory: LooseFaustDspFactory;\n    mixerModule: WebAssembly.Module;\n    voices: number;\n    effectFactory?: LooseFaustDspFactory;\n}\n\n\n// Dynamic AudioWorkletProcessor code generator\nconst getFaustAudioWorkletProcessor = <Poly extends boolean = false>(dependencies: FaustAudioWorkletProcessorDependencies<Poly>, faustData: FaustData) => {\n    const { registerProcessor, AudioWorkletProcessor, sampleRate } = globalThis as unknown as AudioWorkletGlobalScope;\n\n    const {\n        FaustBaseWebAudioDsp,\n        FaustWasmInstantiator\n    } = dependencies;\n    \n    const {\n        dspName,\n        dspMeta,\n        effectMeta,\n        poly\n    } = faustData;\n\n    /**\n     * Base class for Monophonic and Polyphonic AudioWorkletProcessor\n     */\n    class FaustAudioWorkletProcessor<Poly extends boolean = false> extends AudioWorkletProcessor {\n\n        // Use ! syntax when the field is not defined in the constructor\n        protected fDSPCode!: Poly extends true ? FaustPolyWebAudioDsp : FaustMonoWebAudioDsp;\n\n        constructor(options: FaustAudioWorkletNodeOptions<Poly>) {\n            super(options);\n\n            // Setup port message handling\n            this.port.onmessage = (e: MessageEvent) => { this.handleMessageAux(e); }\n        }\n\n        static get parameterDescriptors() {\n            const params = [] as AudioParamDescriptor[];\n            // Analyse voice JSON to generate AudioParam parameters\n            const callback = (item: FaustUIItem) => {\n                if (item.type === \"vslider\" || item.type === \"hslider\" || item.type === \"nentry\") {\n                    params.push({ name: item.address, defaultValue: item.init || 0, minValue: item.min || 0, maxValue: item.max || 0 });\n                } else if (item.type === \"button\" || item.type === \"checkbox\") {\n                    params.push({ name: item.address, defaultValue: item.init || 0, minValue: 0, maxValue: 1 });\n                }\n            }\n            FaustBaseWebAudioDsp.parseUI(dspMeta.ui, callback);\n            // Analyse effect JSON to generate AudioParam parameters\n            if (effectMeta) FaustBaseWebAudioDsp.parseUI(effectMeta.ui, callback);\n            return params;\n        }\n\n        process(inputs: Float32Array[][], outputs: Float32Array[][], parameters: { [key: string]: Float32Array }) {\n\n            // Update controls (possibly needed for sample accurate control)\n            for (const path in parameters) {\n                const paramArray = parameters[path];\n                this.fDSPCode.setParamValue(path, paramArray[0]);\n            }\n\n            return this.fDSPCode.compute(inputs[0], outputs[0]);\n        }\n\n        protected handleMessageAux(e: MessageEvent) { // use arrow function for binding\n            const msg = e.data;\n\n            switch (msg.type) {\n                // Generic MIDI message\n                case \"midi\": this.midiMessage(msg.data); break;\n                // Typed MIDI message\n                case \"ctrlChange\": this.ctrlChange(msg.data[0], msg.data[1], msg.data[2]); break;\n                case \"pitchWheel\": this.pitchWheel(msg.data[0], msg.data[1]); break;\n                // Generic data message\n                case \"param\": this.setParamValue(msg.data.path, msg.data.value); break;\n                // Plot handler set on demand\n                case \"setPlotHandler\": {\n                    if (msg.data) {\n                        this.fDSPCode.setPlotHandler((output, index, events) => this.port.postMessage({ type: \"plot\", value: output, index: index, events: events }));\n                    } else {\n                        this.fDSPCode.setPlotHandler(null);\n                    }\n                    break;\n                }\n\n                case \"start\": {\n                    this.fDSPCode.start();\n                    break;\n                }\n\n                case \"stop\": {\n                    this.fDSPCode.stop();\n                    break;\n                }\n\n                case \"destroy\": {\n                    this.port.close();\n                    this.fDSPCode.destroy();\n                    break;\n                }\n                default:\n                    break;\n            }\n        }\n\n        protected setParamValue(path: string, value: number) {\n            this.fDSPCode.setParamValue(path, value);\n        }\n\n        protected midiMessage(data: number[] | Uint8Array) {\n            this.fDSPCode.midiMessage(data);\n        }\n\n        protected ctrlChange(channel: number, ctrl: number, value: number) {\n            this.fDSPCode.ctrlChange(channel, ctrl, value);\n        }\n\n        protected pitchWheel(channel: number, wheel: number) {\n            this.fDSPCode.pitchWheel(channel, wheel);\n        }\n    }\n\n    /**\n     * Monophonic AudioWorkletProcessor\n     */\n    class FaustMonoAudioWorkletProcessor extends FaustAudioWorkletProcessor<false> {\n\n        constructor(options: FaustAudioWorkletNodeOptions) {\n            super(options);\n            const { FaustMonoWebAudioDsp: FaustWebAudioMonoDSP } = dependencies as FaustAudioWorkletProcessorDependencies<false>;\n            const { factory, sampleSize } = options.processorOptions;\n\n            const instance = FaustWasmInstantiator.createSyncMonoDSPInstance(factory);\n            // Create Monophonic DSP\n            this.fDSPCode = new FaustWebAudioMonoDSP(instance, sampleRate, sampleSize, 128);\n\n            // Setup output handler\n            this.fDSPCode.setOutputParamHandler((path, value) => this.port.postMessage({ path, value, type: \"param\" }));\n\n            this.fDSPCode.start();\n        }\n    }\n\n    /**\n     * Polyphonic AudioWorkletProcessor\n     */\n    class FaustPolyAudioWorkletProcessor extends FaustAudioWorkletProcessor<true> {\n\n        constructor(options: FaustPolyAudioWorkletNodeOptions) {\n            super(options);\n            const { FaustPolyWebAudioDsp: FaustWebAudioPolyDSP } = dependencies as FaustAudioWorkletProcessorDependencies<true>;\n\n            const { voiceFactory, mixerModule, voices, effectFactory, sampleSize } = options.processorOptions;\n\n            const instance = FaustWasmInstantiator.createSyncPolyDSPInstance(voiceFactory, mixerModule, voices, effectFactory);\n            // Create Polyphonic DSP\n            this.fDSPCode = new FaustWebAudioPolyDSP(instance, sampleRate, sampleSize, 128);\n\n            // Setup port message handling\n            this.port.onmessage = (e: MessageEvent) => { this.handleMessageAux(e); }\n\n            // Setup output handler\n            this.fDSPCode.setOutputParamHandler((path, value) => this.port.postMessage({ path, value, type: \"param\" }));\n\n            this.fDSPCode.start();\n        }\n\n        protected midiMessage(data: number[] | Uint8Array) {\n            const cmd = data[0] >> 4;\n            const channel = data[0] & 0xf;\n            const data1 = data[1];\n            const data2 = data[2];\n            if (cmd === 8 || (cmd === 9 && data2 === 0)) this.keyOff(channel, data1, data2);\n            else if (cmd === 9) this.keyOn(channel, data1, data2);\n            else super.midiMessage(data);\n        }\n\n        protected handleMessageAux = (e: MessageEvent) => { // use arrow function for binding\n            const msg = e.data;\n            switch (msg.type) {\n                case \"keyOn\": this.keyOn(msg.data[0], msg.data[1], msg.data[2]); break;\n                case \"keyOff\": this.keyOff(msg.data[0], msg.data[1], msg.data[2]); break;\n                default:\n                    super.handleMessageAux(e);\n                    break;\n            }\n        }\n\n        // Public API\n        keyOn(channel: number, pitch: number, velocity: number) {\n            this.fDSPCode.keyOn(channel, pitch, velocity);\n        }\n\n        keyOff(channel: number, pitch: number, velocity: number) {\n            this.fDSPCode.keyOff(channel, pitch, velocity);\n        }\n\n        allNotesOff(hard: boolean) {\n            this.fDSPCode.allNotesOff(hard);\n        }\n    }\n\n    try {\n        // Synchronously compile and instantiate the wasm module\n        if (poly) {\n            registerProcessor(dspName || \"mydsp_poly\", FaustPolyAudioWorkletProcessor);\n        } else {\n            registerProcessor(dspName || \"mydsp\", FaustMonoAudioWorkletProcessor);\n        }\n    } catch (error) {\n        console.warn(error);\n    }\n}\n\nexport default getFaustAudioWorkletProcessor;\n", "import { sha256 } from \"js-sha256\";\nimport type { ILibFaust } from \"./LibFaust\";\nimport type { FaustDspFactory, IntVector } from \"./types\";\n\nexport interface IFaustCompiler {\n    /**\n     * Gives the Faust compiler version.\n     * @return a version string\n     */\n    version(): string;\n\n    /**\n     * Gives the last compilation error.\n     * @return an error string\n     */\n    getErrorMessage(): string;\n\n    /**\n     * Create a wasm factory from Faust code i.e. wasm compiled code, to be used to create monophonic instances. \n     * This function is running asynchronously.\n     *\n     * @param name - an arbitrary name for the Faust factory\n     * @param code - Faust dsp code\n     * @param args - the compiler options\n     * @returns returns the wasm factory\n     */\n    createMonoDSPFactory(name: string, code: string, args: string): Promise<FaustDspFactory | null>;\n\n    /**\n     * Create a wasm factory from Faust code i.e. wasm compiled code, to be used to create polyphonic instances. \n     * This function is running asynchronously.\n     *\n     * @param name - an arbitrary name for the Faust factory\n     * @param code - Faust dsp code\n     * @param args - the compiler options\n     * @returns returns the wasm factory\n     */\n    createPolyDSPFactory(name: string, code: string, args: string): Promise<FaustDspFactory | null>;\n\n    /**\n     * Delete a dsp factory.\n     *\n     * @param factory - the factory to be deleted\n     */\n    deleteDSPFactory(factory: FaustDspFactory): void;\n\n    /**\n     * Expand Faust code i.e. linearize included libraries.\n     *\n     * @param code - Faust dsp code\n     * @param args - the compiler options\n     * @returns returns the expanded dsp code\n     */\n    expandDSP(code: string, args: string): string | null;\n\n    /**\n     * Generates auxiliary files from Faust code. The output depends on the compiler options.\n     *\n     * @param name - an arbitrary name for the Faust module\n     * @param code - Faust dsp code\n     * @param args - the compiler options\n     * @returns whether the generation actually succeded\n     */\n    generateAuxFiles(name: string, code: string, args: string): boolean;\n\n    /**\n     * Delete all factories.\n     */\n    deleteAllDSPFactories(): void;\n\n    fs(): typeof FS;\n\n    getAsyncInternalMixerModule(isDouble?: boolean): Promise<{ mixerBuffer: Uint8Array; mixerModule: WebAssembly.Module }>;\n    getSyncInternalMixerModule(isDouble?: boolean): { mixerBuffer: Uint8Array; mixerModule: WebAssembly.Module };\n}\n\nclass FaustCompiler implements IFaustCompiler {\n    private fLibFaust: ILibFaust;\n    private fErrorMessage: string;\n    private static gFactories: Map<string, FaustDspFactory> = new Map<string, FaustDspFactory>();\n    private mixer32Buffer!: Uint8Array;\n    private mixer64Buffer!: Uint8Array;\n    private mixer32Module!: WebAssembly.Module;\n    private mixer64Module!: WebAssembly.Module;\n\n    constructor(libFaust: ILibFaust) {\n        this.fLibFaust = libFaust;\n        this.fErrorMessage = \"\";\n    }\n    private intVec2intArray(vec: IntVector) {\n        const size = vec.size();\n        const ui8Code = new Uint8Array(size);\n        for (let i = 0; i < size; i++) {\n            ui8Code[i] = vec.get(i);\n        }\n        return ui8Code;\n    }\n    private async createDSPFactory(name: string, code: string, args: string, poly: boolean) {\n        // Cleanup the cache\n        if (FaustCompiler.gFactories.size > 10) {\n            FaustCompiler.gFactories.clear();\n        }\n\n        // If code is already compiled, return the cached factory\n        let shaKey = sha256(name + code + args + (poly ? \"poly\" : \"mono\"));\n        if (FaustCompiler.gFactories.has(shaKey)) {\n            return FaustCompiler.gFactories.get(shaKey) || null;\n        } else {\n            try {\n                // Can possibly raise a C++ exception catched by the second catch()\n                const faustWasm = this.fLibFaust.createDSPFactory(name, code, args, !poly);\n                try {\n                    const code = this.intVec2intArray(faustWasm.data);\n                    faustWasm.data.delete();\n                    const module = await WebAssembly.compile(code);\n                    const factory = { cfactory: faustWasm.cfactory, code, module, json: faustWasm.json, poly }\n                    // Factory C++ side can be deallocated immediately\n                    this.deleteDSPFactory(factory);\n                    // Keep the compiled factory in the cache\n                    FaustCompiler.gFactories.set(shaKey, factory);\n                    return factory;\n                } catch (e) {\n                    console.error(e);\n                    return null;\n                }\n            } catch {\n                this.fErrorMessage = this.fLibFaust.getErrorAfterException();\n                console.error(`=> exception raised while running createDSPFactory: ${this.fErrorMessage}`);\n                this.fLibFaust.cleanupAfterException();\n                return null;\n            }\n        }\n    }\n    version() {\n        return this.fLibFaust.version();\n    }\n    getErrorMessage() {\n        return this.fErrorMessage;\n    }\n    async createMonoDSPFactory(name: string, code: string, args: string) {\n        return this.createDSPFactory(name, code, args, false);\n    }\n\n    async createPolyDSPFactory(name: string, code: string, args: string) {\n        return this.createDSPFactory(name, code, args, true);\n    }\n    deleteDSPFactory(factory: FaustDspFactory) {\n        this.fLibFaust.deleteDSPFactory(factory.cfactory);\n        factory.cfactory = 0;\n    }\n    expandDSP(code: string, args: string) {\n        try {\n            return this.fLibFaust.expandDSP(\"FaustDSP\", code, args);\n        } catch {\n            this.fErrorMessage = this.fLibFaust.getErrorAfterException();\n            console.error(`=> exception raised while running expandDSP: ${this.fErrorMessage}`);\n            this.fLibFaust.cleanupAfterException();\n            return null;\n        }\n    }\n    generateAuxFiles(name: string, code: string, args: string) {\n        try {\n            return this.fLibFaust.generateAuxFiles(name, code, args);\n        } catch {\n            this.fErrorMessage = this.fLibFaust.getErrorAfterException();\n            console.error(`=> exception raised while running generateAuxFiles: ${this.fErrorMessage}`);\n            this.fLibFaust.cleanupAfterException();\n            return false;\n        }\n    }\n    deleteAllDSPFactories(): void {\n        this.fLibFaust.deleteAllDSPFactories();\n    }\n    fs() {\n        return this.fLibFaust.fs();\n    }\n    async getAsyncInternalMixerModule(isDouble = false) {\n        const bufferKey = isDouble ? \"mixer64Buffer\" : \"mixer32Buffer\";\n        const moduleKey = isDouble ? \"mixer64Module\" : \"mixer32Module\";\n        if (this[moduleKey]) return { mixerBuffer: this[bufferKey], mixerModule: this[moduleKey] };\n        const path = isDouble ? \"/usr/rsrc/mixer64.wasm\" : \"/usr/rsrc/mixer32.wasm\";\n        const mixerBuffer = this.fs().readFile(path, { encoding: \"binary\" });\n        this[bufferKey] = mixerBuffer;\n        // Compile mixer\n        const mixerModule = await WebAssembly.compile(mixerBuffer);\n        this[moduleKey] = mixerModule;\n        return { mixerBuffer, mixerModule };\n    }\n    getSyncInternalMixerModule(isDouble = false) {\n        const bufferKey = isDouble ? \"mixer64Buffer\" : \"mixer32Buffer\";\n        const moduleKey = isDouble ? \"mixer64Module\" : \"mixer32Module\";\n        if (this[moduleKey]) return { mixerBuffer: this[bufferKey], mixerModule: this[moduleKey] };\n        const path = isDouble ? \"/usr/rsrc/mixer64.wasm\" : \"/usr/rsrc/mixer32.wasm\";\n        const mixerBuffer = this.fs().readFile(path, { encoding: \"binary\" });\n        this[bufferKey] = mixerBuffer;\n        // Compile mixer\n        const mixerModule = new WebAssembly.Module(mixerBuffer);\n        this[moduleKey] = mixerModule;\n        return { mixerBuffer, mixerModule };\n    }\n}\n\nexport default FaustCompiler;\n", "/**\n * The Faust wasm instance interface.\n */\nexport interface IFaustDspInstance {\n    /**\n     * The dsp computation, to be called with successive input/output audio buffers.\n     *\n     * @param $dsp - the DSP pointer\n     * @param count - the audio buffer size in frames\n     * @param $inputs - the input audio buffer as in index in wasm memory\n     * @param $output - the output audio buffer as in index in wasm memory\n     */\n    compute($dsp: number, count: number, $inputs: number, $output: number): void;\n\n    /**\n     * Give the number of inputs of a Faust wasm instance.\n     * \n     * @param $dsp - the DSP pointer\n     */\n    getNumInputs($dsp: number): number;\n\n    /**\n     * Give the number of outputs of a Faust wasm instance.\n     * \n     * @param $dsp - the DSP pointer\n     */\n    getNumOutputs($dsp: number): number;\n\n    /**\n     * Give a parameter current value.\n     * \n     * @param $dsp - the DSP pointer\n     * @param index - the parameter index\n     * @preturn the parameter value\n     */\n    getParamValue($dsp: number, index: number): number;\n\n    /**\n     * Give the Faust wasm instance sample rate.\n     * \n     * @param $dsp - the DSP pointer\n     * @preturn the sample rate\n     */\n    getSampleRate($dsp: number): number;\n\n    /**\n     * Global init, calls the following methods:\n     * - static class 'classInit': static tables initialization\n     * - 'instanceInit': constants and instance state initialization\n     *\n     * @param $dsp - the DSP pointer\n     * @param sampleRate - the sampling rate in Hertz\n     */\n    init($dsp: number, sampleRate: number): void;\n\n    /** Init instance state (delay lines...).\n     * \n     * @param $dsp - the DSP pointer\n     */\n    instanceClear($dsp: number): void;\n\n    /** Init instance constant state.\n     * \n     * @param $dsp - the DSP pointer\n     * @param sampleRate - the sampling rate in Hertz\n     */\n    instanceConstants($dsp: number, sampleRate: number): void;\n\n    /** Init instance state.\n     * \n     * @param $dsp - the DSP pointer\n     * @param sampleRate - the sampling rate in Hertz\n     */\n    instanceInit($dsp: number, sampleRate: number): void;\n\n    /** Init default control parameters values.\n     * \n     * @param $dsp - the DSP pointer\n     */\n    instanceResetUserInterface($dsp: number): void;\n\n    /**\n     * Set a parameter current value.\n     * \n     * @param $dsp - the DSP pointer\n     * @param index - the parameter index\n     * @param value - the parameter value\n     */\n    setParamValue($dsp: number, index: number, value: number): void;\n}\n\n/**\n * Mixer used in polyphonic mode.\n */\nexport interface IFaustMixerInstance {\n    clearOutput(bufferSize: number, chans: number, $outputs: number): void;\n    mixCheckVoice(bufferSize: number, chans: number, $inputs: number, $outputs: number): number;\n    fadeOut(bufferSize: number, chans: number, $outputs: number): void;\n}\n\n/**\n * Monophonic instance.\n */\nexport interface FaustMonoDspInstance {\n    memory: WebAssembly.Memory;\n    api: IFaustDspInstance;\n    json: string;\n}\n\n/**\n * Polyphonic instance.\n */\nexport interface FaustPolyDspInstance {\n    memory: WebAssembly.Memory;\n    voices: number;\n    voiceAPI: IFaustDspInstance;\n    effectAPI?: IFaustDspInstance;\n    mixerAPI: IFaustMixerInstance;\n    voiceJSON: string;\n    effectJSON?: string;\n}\n\nclass FaustDspInstance implements IFaustDspInstance {\n    private readonly fExports: IFaustDspInstance;\n\n    constructor(exports: IFaustDspInstance) { this.fExports = exports; }\n\n    compute($dsp: number, count: number, $input: number, $output: number) { this.fExports.compute($dsp, count, $input, $output); }\n    getNumInputs($dsp: number) { return this.fExports.getNumInputs($dsp); }\n    getNumOutputs($dsp: number) { return this.fExports.getNumOutputs($dsp); }\n    getParamValue($dsp: number, index: number) { return this.fExports.getParamValue($dsp, index); }\n    getSampleRate($dsp: number) { return this.fExports.getSampleRate($dsp); }\n    init($dsp: number, sampleRate: number) { this.fExports.init($dsp, sampleRate); }\n    instanceClear($dsp: number) { this.fExports.instanceClear($dsp); }\n    instanceConstants($dsp: number, sampleRate: number) { this.fExports.instanceConstants($dsp, sampleRate); }\n    instanceInit($dsp: number, sampleRate: number) { this.fExports.instanceInit($dsp, sampleRate); }\n    instanceResetUserInterface($dsp: number) { this.fExports.instanceResetUserInterface($dsp); }\n    setParamValue($dsp: number, index: number, value: number) { this.fExports.setParamValue($dsp, index, value); }\n}\n\nexport default FaustDspInstance;\n", "import FaustDspInstance, { FaustMonoDspInstance, FaustPolyDspInstance, IFaustDspInstance, IFaustMixerInstance } from \"./FaustDspInstance\";\nimport type { FaustDspFactory, FaustDspMeta, LooseFaustDspFactory } from \"./types\";\n\nclass FaustWasmInstantiator {\n    private static createWasmImport(memory?: WebAssembly.Memory) {\n        return {\n            env: {\n                memory: memory || new WebAssembly.Memory({ initial: 100 }),\n                memoryBase: 0,\n                tableBase: 0,\n                // Integer version\n                _abs: Math.abs,\n                // Float version\n                _acosf: Math.acos, _asinf: Math.asin, _atanf: Math.atan, _atan2f: Math.atan2,\n                _ceilf: Math.ceil, _cosf: Math.cos, _expf: Math.exp, _floorf: Math.floor,\n                _fmodf: (x: number, y: number) => x % y,\n                _logf: Math.log, _log10f: Math.log10, _max_f: Math.max, _min_f: Math.min,\n                _remainderf: (x: number, y: number) => x - Math.round(x / y) * y,\n                _powf: Math.pow, _roundf: Math.fround, _sinf: Math.sin, _sqrtf: Math.sqrt, _tanf: Math.tan,\n                _acoshf: Math.acosh, _asinhf: Math.asinh, _atanhf: Math.atanh,\n                _coshf: Math.cosh, _sinhf: Math.sinh, _tanhf: Math.tanh,\n                _isnanf: Number.isNaN, _isinff: (x: number) => !isFinite(x),\n                _copysignf: (x: number, y: number) => (Math.sign(x) === Math.sign(y) ? x : -x),\n        \n                // Double version\n                _acos: Math.acos, _asin: Math.asin, _atan: Math.atan, _atan2: Math.atan2,\n                _ceil: Math.ceil, _cos: Math.cos, _exp: Math.exp, _floor: Math.floor,\n                _fmod: (x: number, y: number) => x % y,\n                _log: Math.log, _log10: Math.log10, _max_: Math.max, _min_: Math.min,\n                _remainder: (x: number, y: number) => x - Math.round(x / y) * y,\n                _pow: Math.pow, _round: Math.fround, _sin: Math.sin, _sqrt: Math.sqrt, _tan: Math.tan,\n                _acosh: Math.acosh, _asinh: Math.asinh, _atanh: Math.atanh,\n                _cosh: Math.cosh, _sinh: Math.sinh, _tanh: Math.tanh,\n                _isnan: Number.isNaN, _isinf: (x: number) => !isFinite(x),\n                _copysign: (x: number, y: number) => (Math.sign(x) === Math.sign(y) ? x : -x),\n        \n                table: new WebAssembly.Table({ initial: 0, element: \"anyfunc\" })\n            }\n        };\n    }\n    private static createWasmMemory(voicesIn: number, sampleSize: number, dspMeta: FaustDspMeta, effectMeta: FaustDspMeta, bufferSize: number) {\n        // Hack : at least 4 voices (to avoid weird wasm memory bug?)\n        const voices = Math.max(4, voicesIn);\n        // Memory allocator\n        const ptrSize = sampleSize; // Done on wast/wasm backend side\n        const pow2limit = (x: number) => {\n            let n = 65536; // Minimum = 64 kB\n            while (n < x) { n *= 2; }\n            return n;\n        };\n        const effectSize = effectMeta ? effectMeta.size : 0;\n        let memorySize = pow2limit(\n            effectSize\n            + dspMeta.size * voices\n            + (dspMeta.inputs + dspMeta.outputs * 2)\n            * (ptrSize + bufferSize * sampleSize)\n        ) / 65536;\n        memorySize = Math.max(2, memorySize); // At least 2\n        return new WebAssembly.Memory({ initial: memorySize, maximum: memorySize });\n    };\n    private static createMonoDSPInstanceAux(instance: WebAssembly.Instance, json: string) {\n        const functions = instance.exports as IFaustDspInstance & WebAssembly.Exports;\n        const api = new FaustDspInstance(functions);\n        const memory: any = instance.exports.memory;\n        return { memory, api, json } as FaustMonoDspInstance;\n    }\n    private static createMemoryAux(voices: number, voiceFactory: LooseFaustDspFactory, effectFactory?: LooseFaustDspFactory) {\n        // Parse JSON to get 'size' and 'inputs/outputs' infos\n        const voiceMeta: FaustDspMeta = JSON.parse(voiceFactory.json);\n        const effectMeta: FaustDspMeta = (effectFactory && effectFactory.json) ? JSON.parse(effectFactory.json) : null;\n        const sampleSize = voiceMeta.compile_options.match(\"-double\") ? 8 : 4;\n        // Memory will be shared by voice, mixer and (possibly) effect instances\n        return this.createWasmMemory(voices, sampleSize, voiceMeta, effectMeta, 8192);\n    }\n    private static createMixerAux(mixerModule: WebAssembly.Module, memory: WebAssembly.Memory) {\n        // Create mixer instance\n        const mixerImport = {\n            imports: { print: console.log },\n            memory: { memory }\n        };\n        const mixerInstance = new WebAssembly.Instance(mixerModule, mixerImport);\n        const mixerFunctions = mixerInstance.exports as IFaustMixerInstance & WebAssembly.Exports;\n        return mixerFunctions;\n    }\n    // Public API\n    static async loadDSPFactory(wasmPath: string, jsonPath: string) {\n        const wasmFile = await fetch(wasmPath);\n        if (!wasmFile.ok) {\n            console.error(`=> exception raised while running loadDSPFactory, file not found: ${wasmPath}`);\n            return null;\n        }\n        try {\n            const wasmBuffer = await wasmFile.arrayBuffer();\n            const module = await WebAssembly.compile(wasmBuffer);\n            const jsonFile = await fetch(jsonPath);\n            const json = await jsonFile.text();\n            const meta: FaustDspMeta = JSON.parse(json);\n            const cOptions = meta.compile_options;\n            const poly = cOptions.indexOf('wasm-e') !== -1;\n            return { cfactory: 0, code: new Uint8Array(wasmBuffer), module, json, poly } as FaustDspFactory;\n        } catch (e) {\n            console.error(`=> exception raised while running loadDSPFactory: ${e}`);\n            return null;\n        }\n    }\n    \n    static async loadDSPMixer(mixerPath: string, fs?: typeof FS) {\n        try {\n            let mixerBuffer = null;\n            if (fs) {\n                mixerBuffer = fs.readFile(mixerPath, { encoding: \"binary\" });\n            } else {\n                const mixerFile = await fetch(mixerPath);\n                mixerBuffer = await mixerFile.arrayBuffer();\n            }\n            // Compile mixer\n            return WebAssembly.compile(mixerBuffer);\n        } catch (e) {\n            console.error(`=> exception raised while running loadMixer: ${e}`);\n            return null;\n        }\n    }\n    \n    static async createAsyncMonoDSPInstance(factory: LooseFaustDspFactory) {\n        const instance = await WebAssembly.instantiate(factory.module, this.createWasmImport());\n        return this.createMonoDSPInstanceAux(instance, factory.json);\n    }\n    \n    static createSyncMonoDSPInstance(factory: LooseFaustDspFactory) {\n        const instance = new WebAssembly.Instance(factory.module, this.createWasmImport());\n        return this.createMonoDSPInstanceAux(instance, factory.json);\n    }\n    \n    static async createAsyncPolyDSPInstance(voiceFactory: LooseFaustDspFactory, mixerModule: WebAssembly.Module, voices: number, effectFactory?: LooseFaustDspFactory): Promise<FaustPolyDspInstance> {\n        const memory = this.createMemoryAux(voices, voiceFactory, effectFactory);\n        // Create voice \n        const voiceInstance = await WebAssembly.instantiate(voiceFactory.module, this.createWasmImport(memory));\n        const voiceFunctions = voiceInstance.exports as IFaustDspInstance & WebAssembly.Exports;\n        const voiceAPI = new FaustDspInstance(voiceFunctions);\n        // Create mixer\n        const mixerAPI = this.createMixerAux(mixerModule, memory);\n    \n        // Possibly create effect instance \n        if (effectFactory) {\n            const effectInstance = await WebAssembly.instantiate(effectFactory.module, this.createWasmImport(memory));\n            const effectFunctions = effectInstance.exports as IFaustDspInstance & WebAssembly.Exports;\n            const effectAPI = new FaustDspInstance(effectFunctions);\n            return {\n                memory,\n                voices,\n                voiceAPI,\n                effectAPI,\n                mixerAPI,\n                voiceJSON: voiceFactory.json,\n                effectJSON: effectFactory.json\n            };\n        } else {\n            return {\n                memory,\n                voices,\n                voiceAPI,\n                mixerAPI,\n                voiceJSON: voiceFactory.json\n            };\n        }\n    }\n    \n    static createSyncPolyDSPInstance(voiceFactory: LooseFaustDspFactory, mixerModule: WebAssembly.Module, voices: number, effectFactory?: LooseFaustDspFactory): FaustPolyDspInstance {\n        const memory = this.createMemoryAux(voices, voiceFactory, effectFactory);\n        // Create voice \n        const voiceInstance = new WebAssembly.Instance(voiceFactory.module, this.createWasmImport(memory));\n        const voiceFunctions = voiceInstance.exports as IFaustDspInstance & WebAssembly.Exports;\n        const voiceAPI = new FaustDspInstance(voiceFunctions);\n        // Create mixer\n        const mixerAPI = this.createMixerAux(mixerModule, memory);\n    \n        // Possibly create effect instance \n        if (effectFactory) {\n            const effectInstance = new WebAssembly.Instance(effectFactory.module, this.createWasmImport(memory));\n            const effectFunctions = effectInstance.exports as IFaustDspInstance & WebAssembly.Exports;\n            const effectAPI = new FaustDspInstance(effectFunctions);\n            return {\n                memory,\n                voices,\n                voiceAPI,\n                effectAPI,\n                mixerAPI,\n                voiceJSON: voiceFactory.json,\n                effectJSON: effectFactory.json\n            };\n        } else {\n            return {\n                memory,\n                voices,\n                voiceAPI,\n                mixerAPI,\n                voiceJSON: voiceFactory.json\n            };\n        }\n    }\n}\n\nexport default FaustWasmInstantiator;\n", "import type { IFaustMonoWebAudioDsp } from \"./FaustWebAudioDsp\";\n\n/**\n *  For offline rendering.\n */\nexport interface IFaustOfflineProcessor {\n    /**\n     * Render frames in an array.\n     *\n     * @param inputs - input signal\n     * @param length - the number of frames to render (default: bufferSize)\n     * @param onUpdate - a callback after each buffer calculated, with an argument \"current sample\"\n     * @return an array of Float32Array with the rendered frames\n     */\n    render(inputs?: Float32Array[], length?: number, onUpdate?: (sample: number) => any): Float32Array[];\n}\n\nclass FaustOfflineProcessor implements IFaustOfflineProcessor {\n\n    private fDSPCode: IFaustMonoWebAudioDsp;\n    private fBufferSize: number;\n    private fInputs: Float32Array[];\n    private fOutputs: Float32Array[];\n\n    constructor(instance: IFaustMonoWebAudioDsp, bufferSize: number) {\n        this.fDSPCode = instance;\n        this.fBufferSize = bufferSize;\n        this.fInputs = new Array(this.fDSPCode.getNumInputs()).fill(null).map(() => new Float32Array(bufferSize));\n        this.fOutputs = new Array(this.fDSPCode.getNumOutputs()).fill(null).map(() => new Float32Array(bufferSize));\n    }\n\n    render(inputs: Float32Array[] = [], length = this.fBufferSize, onUpdate?: (sample: number) => any): Float32Array[] {\n        let l = 0;\n        const outputs = new Array(this.fDSPCode.getNumOutputs()).fill(null).map(() => new Float32Array(length));\n        // The node has to be started before rendering\n        this.fDSPCode.start();\n        while (l < length) {\n            const sliceLength = Math.min(length - l, this.fBufferSize);\n            for (let i = 0; i < this.fDSPCode.getNumInputs(); i++) {\n                let input: Float32Array;\n                if (inputs[i]) {\n                    if (inputs[i].length <= l) {\n                        input = new Float32Array(sliceLength);\n                    } else if (inputs[i].length > l + sliceLength) {\n                        input = inputs[i].subarray(l, l + sliceLength);\n                    } else {\n                        input = inputs[i].subarray(l, inputs[i].length);\n                    }\n                } else {\n                    input = new Float32Array(sliceLength);\n                }\n                this.fInputs[i] = input;\n            }\n            this.fDSPCode.compute(this.fInputs, this.fOutputs);\n            for (let i = 0; i < this.fDSPCode.getNumOutputs(); i++) {\n                const output = this.fOutputs[i];\n                if (sliceLength < this.fBufferSize) {\n                    outputs[i].set(output.subarray(0, sliceLength), l);\n                } else {\n                    outputs[i].set(output, l);\n                }\n            }\n            l += this.fBufferSize;\n            onUpdate?.(l);\n        }\n        // The node can be stopped after rendering\n        this.fDSPCode.stop();\n        return outputs;\n    }\n}\n\nexport default FaustOfflineProcessor;\n", "import type FaustCompiler from \"./FaustCompiler\";\n\ninterface IFaustSvgDiagrams {\n    /**\n     * Generates auxiliary files from Faust code. The output depends on the compiler options.\n     *\n     * @param name - the DSP's name\n     * @param code - Faust code\n     * @param args - compilation args\n     * @returns the svg diagrams as a filename - svg string map\n     */\n    from(name: string, code: string, args: string): Record<string, string>;\n}\n\nclass FaustSvgDiagrams implements IFaustSvgDiagrams {\n    private compiler: FaustCompiler;\n\n    constructor(compiler: FaustCompiler) {\n        this.compiler = compiler;\n    }\n    \n    from(name: string, code: string, args: string) {\n        const fs = this.compiler.fs();\n        try {\n            const files: string[] = fs.readdir(`/${name}-svg/`);\n            files.filter(file => file !== \".\" && file !== \"..\").forEach(file => fs.unlink(`/${name}-svg/${file}`));\n        } catch {}\n        const success = this.compiler.generateAuxFiles(name, code, `-lang wasm -svg ${args}`);\n        if (!success) throw new Error(this.compiler.getErrorMessage());\n        const svgs: Record<string, string> = {};\n        const files: string[] = fs.readdir(`/${name}-svg/`);\n        files.filter(file => file !== \".\" && file !== \"..\").forEach(file => svgs[file] = fs.readFile(`/${name}-svg/${file}`, { encoding: \"utf8\" }) as string);\n        return svgs;\n    }\n}\n\nexport default FaustSvgDiagrams;\n", "import type { FaustModule, LibFaustWasm, FaustInfoType } from \"./types\";\n\nexport interface ILibFaust extends LibFaustWasm {\n    module(): FaustModule;\n    fs(): typeof FS;\n}\n\nclass LibFaust implements ILibFaust {\n    private fModule: FaustModule;\n    private fCompiler: LibFaustWasm;\n    private fFileSystem: typeof FS;\n\n    constructor(module: FaustModule) {\n        this.fModule = module;\n        this.fCompiler = new module.libFaustWasm();\n        this.fFileSystem = this.fModule.FS;\n    }\n    module() {\n        return this.fModule;\n    }\n    fs() {\n        return this.fFileSystem;\n    }\n    version() {\n        return this.fCompiler.version();\n    }\n    createDSPFactory(name: string, code: string, args: string, useInternalMemory: boolean) {\n        return this.fCompiler.createDSPFactory(name, code, args, useInternalMemory);\n    }\n    deleteDSPFactory(cFactory: number) {\n        return this.fCompiler.deleteDSPFactory(cFactory);\n    }\n    expandDSP(name: string, code: string, args: string) {\n        return this.fCompiler.expandDSP(name, code, args);\n    }\n    generateAuxFiles(name: string, code: string, args: string) {\n        return this.fCompiler.generateAuxFiles(name, code, args);\n    }\n    deleteAllDSPFactories() {\n        return this.fCompiler.deleteAllDSPFactories();\n    }\n    getErrorAfterException() {\n        return this.fCompiler.getErrorAfterException();\n    }\n    cleanupAfterException() {\n        return this.fCompiler.cleanupAfterException();\n    }\n    getInfos(what: FaustInfoType) {\n        return this.fCompiler.getInfos(what);\n    }\n    toString() {\n        return `LibFaust module: ${this.fModule}, compiler: ${this.fCompiler}`;\n    }\n\n}\n\nexport default LibFaust;\n", "export interface WavEncoderOptions {\n    bitDepth: number;\n    float?: boolean;\n    symmetric?: boolean;\n    shared?: boolean;\n    sampleRate: number;\n}\ninterface Format {\n    formatId: number;\n    float: boolean;\n    symmetric: boolean;\n    numberOfChannels: number;\n    sampleRate: number;\n    length: number;\n    bitDepth: number;\n    byteDepth: number;\n}\n\n/**\n * Code from https://github.com/mohayonao/wav-encoder\n */\nclass WavEncoder {\n    static encode(audioBuffer: Float32Array[], options: WavEncoderOptions) {\n        const numberOfChannels = audioBuffer.length;\n        const length = audioBuffer[0].length;\n        const { shared, float } = options;\n        const bitDepth = float ? 32 : ((options.bitDepth | 0) || 16);\n        const byteDepth = bitDepth >> 3;\n        const byteLength = length * numberOfChannels * byteDepth;\n        // eslint-disable-next-line no-undef\n        const AB = shared ? (globalThis.SharedArrayBuffer || globalThis.ArrayBuffer) : globalThis.ArrayBuffer;\n        const ab = new AB((44 + byteLength) * Uint8Array.BYTES_PER_ELEMENT);\n        const dataView = new DataView(ab);\n        const writer = new Writer(dataView);\n        const format: Format = {\n            formatId: float ? 0x0003 : 0x0001,\n            float: !!float,\n            numberOfChannels,\n            sampleRate: options.sampleRate,\n            symmetric: !!options.symmetric,\n            length,\n            bitDepth,\n            byteDepth\n        };\n        this.writeHeader(writer, format);\n        this.writeData(writer, audioBuffer, format);\n        return ab;\n    }\n    private static writeHeader(writer: Writer, format: Format) {\n        const { formatId, sampleRate, bitDepth, numberOfChannels, length, byteDepth } = format;\n        writer.string(\"RIFF\");\n        writer.uint32(writer.dataView.byteLength - 8);\n        writer.string(\"WAVE\");\n        writer.string(\"fmt \");\n        writer.uint32(16);\n        writer.uint16(formatId);\n        writer.uint16(numberOfChannels);\n        writer.uint32(sampleRate);\n        writer.uint32(sampleRate * numberOfChannels * byteDepth);\n        writer.uint16(numberOfChannels * byteDepth);\n        writer.uint16(bitDepth);\n        writer.string(\"data\");\n        writer.uint32(length * numberOfChannels * byteDepth);\n        return writer.pos;\n    }\n    private static writeData(writer: Writer, audioBuffer: Float32Array[], format: Format) {\n        const { bitDepth, float, length, numberOfChannels, symmetric } = format;\n        if (bitDepth === 32 && float) {\n            const { dataView, pos } = writer;\n            const ab = dataView.buffer;\n            const f32View = new Float32Array(ab, pos);\n            if (numberOfChannels === 1) {\n                f32View.set(audioBuffer[0]);\n                return;\n            }\n            for (let ch = 0; ch < numberOfChannels; ch++) {\n                const channel = audioBuffer[ch];\n                for (let i = 0; i < length; i++) {\n                    f32View[i * numberOfChannels + ch] = channel[i];\n                }\n            }\n            return;\n        }\n        const encoderOption = float ? \"f\" : symmetric ? \"s\" : \"\";\n        const methodName = \"pcm\" + bitDepth + encoderOption;\n\n        if (!(writer as any)[methodName]) {\n            throw new TypeError(\"Not supported bit depth: \" + bitDepth);\n        }\n\n        const write: (value: number) => void = (writer as any)[methodName].bind(writer);\n\n        for (let i = 0; i < length; i++) {\n            for (let j = 0; j < numberOfChannels; j++) {\n                write(audioBuffer[j][i]);\n            }\n        }\n    }\n}\n\nclass Writer {\n    pos = 0;\n    dataView: DataView;\n    constructor(dataView: DataView) {\n        this.dataView = dataView;\n    }\n    int16(value: number) {\n        this.dataView.setInt16(this.pos, value, true);\n        this.pos += 2;\n    }\n    uint16(value: number) {\n        this.dataView.setUint16(this.pos, value, true);\n        this.pos += 2;\n    }\n    uint32(value: number) {\n        this.dataView.setUint32(this.pos, value, true);\n        this.pos += 4;\n    }\n    string(value: string) {\n        for (let i = 0, imax = value.length; i < imax; i++) {\n            this.dataView.setUint8(this.pos++, value.charCodeAt(i));\n        }\n    }\n    pcm8(valueIn: number) {\n        let value = valueIn;\n        value = Math.max(-1, Math.min(value, +1));\n        value = (value * 0.5 + 0.5) * 255;\n        value = Math.round(value) | 0;\n        this.dataView.setUint8(this.pos, value/* , true*/);\n        this.pos += 1;\n    }\n    pcm8s(valueIn: number) {\n        let value = valueIn;\n        value = Math.round(value * 128) + 128;\n        value = Math.max(0, Math.min(value, 255));\n        this.dataView.setUint8(this.pos, value/* , true*/);\n        this.pos += 1;\n    }\n    pcm16(valueIn: number) {\n        let value = valueIn;\n        value = Math.max(-1, Math.min(value, +1));\n        value = value < 0 ? value * 32768 : value * 32767;\n        value = Math.round(value) | 0;\n        this.dataView.setInt16(this.pos, value, true);\n        this.pos += 2;\n    }\n    pcm16s(valueIn: number) {\n        let value = valueIn;\n        value = Math.round(value * 32768);\n        value = Math.max(-32768, Math.min(value, 32767));\n        this.dataView.setInt16(this.pos, value, true);\n        this.pos += 2;\n    }\n    pcm24(valueIn: number) {\n        let value = valueIn;\n        value = Math.max(-1, Math.min(value, +1));\n        value = value < 0 ? 0x1000000 + value * 8388608 : value * 8388607;\n        value = Math.round(value) | 0;\n\n        const x0 = (value >> 0) & 0xFF;\n        const x1 = (value >> 8) & 0xFF;\n        const x2 = (value >> 16) & 0xFF;\n\n        this.dataView.setUint8(this.pos + 0, x0);\n        this.dataView.setUint8(this.pos + 1, x1);\n        this.dataView.setUint8(this.pos + 2, x2);\n        this.pos += 3;\n    }\n    pcm24s(valueIn: number) {\n        let value = valueIn;\n        value = Math.round(value * 8388608);\n        value = Math.max(-8388608, Math.min(value, 8388607));\n\n        const x0 = (value >> 0) & 0xFF;\n        const x1 = (value >> 8) & 0xFF;\n        const x2 = (value >> 16) & 0xFF;\n\n        this.dataView.setUint8(this.pos + 0, x0);\n        this.dataView.setUint8(this.pos + 1, x1);\n        this.dataView.setUint8(this.pos + 2, x2);\n        this.pos += 3;\n    }\n    pcm32(valueIn: number) {\n        let value = valueIn;\n        value = Math.max(-1, Math.min(value, +1));\n        value = value < 0 ? value * 2147483648 : value * 2147483647;\n        value = Math.round(value) | 0;\n        this.dataView.setInt32(this.pos, value, true);\n        this.pos += 4;\n    }\n    pcm32s(valueIn: number) {\n        let value = valueIn;\n        value = Math.round(value * 2147483648);\n        value = Math.max(-2147483648, Math.min(value, +2147483647));\n        this.dataView.setInt32(this.pos, value, true);\n        this.pos += 4;\n    }\n    pcm32f(value: number) {\n        this.dataView.setFloat32(this.pos, value, true);\n        this.pos += 4;\n    }\n}\n\nexport default WavEncoder;\n", "export interface WavDecoderOptions {\n    symmetric?: boolean;\n    shared?: boolean;\n}\ninterface Format {\n    formatId: number;\n    float: boolean;\n    numberOfChannels: number;\n    sampleRate: number;\n    byteRate: number;\n    blockSize: number;\n    bitDepth: number;\n}\n\n/**\n * Code from https://github.com/mohayonao/wav-decoder\n */\nclass WavDecoder {\n    static decode(buffer: ArrayBuffer, options?: WavDecoderOptions) {\n        const dataView = new DataView(buffer);\n        const reader = new Reader(dataView);\n        if (reader.string(4) !== \"RIFF\") {\n            throw new TypeError(\"Invalid WAV file\");\n        }\n        reader.uint32(); // skip file length\n        if (reader.string(4) !== \"WAVE\") {\n            throw new TypeError(\"Invalid WAV file\");\n        }\n        let format: Format | null = null;\n        let audioData: {\n            numberOfChannels: number;\n            length: number;\n            sampleRate: number;\n            channelData: Float32Array[];\n        } | null = null;\n        do {\n            const chunkType = reader.string(4);\n            const chunkSize = reader.uint32();\n            if (chunkType === \"fmt \") {\n                format = this.decodeFormat(reader, chunkSize);\n            } else if (chunkType === \"data\") {\n                audioData = this.decodeData(reader, chunkSize, format as Format, options || {});\n            } else {\n                reader.skip(chunkSize);\n            }\n        } while (audioData === null);\n        return audioData;\n    }\n    private static decodeFormat(reader: Reader, chunkSize: number) {\n        const formats = {\n            0x0001: \"lpcm\",\n            0x0003: \"lpcm\"\n        };\n        const formatId = reader.uint16();\n        if (!formats.hasOwnProperty(formatId)) {\n            throw new TypeError(\"Unsupported format in WAV file: 0x\" + formatId.toString(16));\n        }\n        const format: Format = {\n            formatId: formatId,\n            float: formatId === 0x0003,\n            numberOfChannels: reader.uint16(),\n            sampleRate: reader.uint32(),\n            byteRate: reader.uint32(),\n            blockSize: reader.uint16(),\n            bitDepth: reader.uint16()\n        };\n        reader.skip(chunkSize - 16);\n        return format;\n    }\n    private static decodeData(reader: Reader, chunkSizeIn: number, format: Format, options: WavDecoderOptions) {\n        const chunkSize = Math.min(chunkSizeIn, reader.remain());\n        const length = Math.floor(chunkSize / format.blockSize);\n        const numberOfChannels = format.numberOfChannels;\n        const sampleRate = format.sampleRate;\n        const channelData: Float32Array[] = new Array(numberOfChannels);\n        for (let ch = 0; ch < numberOfChannels; ch++) {\n            const AB = options.shared ? (globalThis.SharedArrayBuffer || globalThis.ArrayBuffer) : globalThis.ArrayBuffer;\n            const ab = new AB(length * Float32Array.BYTES_PER_ELEMENT);\n            channelData[ch] = new Float32Array(ab);\n        }\n        this.readPCM(reader, channelData, length, format, options);\n        return {\n            numberOfChannels,\n            length,\n            sampleRate,\n            channelData\n        };\n    }\n    private static readPCM(reader: Reader, channelData: Float32Array[], length: number, format: Format, options: WavDecoderOptions) {\n        const bitDepth = format.bitDepth;\n        const decoderOption = format.float ? \"f\" : options.symmetric ? \"s\" : \"\";\n        const methodName = \"pcm\" + bitDepth + decoderOption as `pcm${8 | 16 | 32}${\"f\" | \"s\" | \"\"}`;\n        if (!(reader as any)[methodName]) {\n            throw new TypeError(\"Not supported bit depth: \" + format.bitDepth);\n        }\n        const read: () => number = (reader as any)[methodName].bind(reader);\n        const numberOfChannels = format.numberOfChannels;\n        for (let i = 0; i < length; i++) {\n            for (let ch = 0; ch < numberOfChannels; ch++) {\n                channelData[ch][i] = read();\n            }\n        }\n    }\n}\n\nclass Reader {\n    pos = 0;\n    dataView: DataView;\n    constructor(dataView: DataView) {\n        this.dataView = dataView;\n    }\n    remain() {\n        return this.dataView.byteLength - this.pos;\n    }\n    skip(n: number) {\n        this.pos += n;\n    }\n    uint8() {\n        const data = this.dataView.getUint8(this.pos);\n        this.pos += 1;\n        return data;\n    }\n    int16() {\n        const data = this.dataView.getInt16(this.pos, true);\n        this.pos += 2;\n        return data;\n    }\n    uint16() {\n        const data = this.dataView.getUint16(this.pos, true);\n        this.pos += 2;\n        return data;\n    }\n    uint32() {\n        const data = this.dataView.getUint32(this.pos, true);\n        this.pos += 4;\n        return data;\n    }\n    string(n: number) {\n        let data = \"\";\n        for (let i = 0; i < n; i++) {\n            data += String.fromCharCode(this.uint8());\n        }\n        return data;\n    }\n    pcm8() {\n        const data = this.dataView.getUint8(this.pos) - 128;\n        this.pos += 1;\n        return data < 0 ? data / 128 : data / 127;\n    }\n    pcm8s() {\n        const data = this.dataView.getUint8(this.pos) - 127.5;\n        this.pos += 1;\n        return data / 127.5;\n    }\n    pcm16() {\n        const data = this.dataView.getInt16(this.pos, true);\n        this.pos += 2;\n        return data < 0 ? data / 32768 : data / 32767;\n    }\n    pcm16s() {\n        const data = this.dataView.getInt16(this.pos, true);\n        this.pos += 2;\n        return data / 32768;\n    }\n    pcm24() {\n        const x0 = this.dataView.getUint8(this.pos + 0);\n        const x1 = this.dataView.getUint8(this.pos + 1);\n        const x2 = this.dataView.getUint8(this.pos + 2);\n        const xx = (x0 + (x1 << 8) + (x2 << 16));\n\n        const data = xx > 0x800000 ? xx - 0x1000000 : xx;\n        this.pos += 3;\n        return data < 0 ? data / 8388608 : data / 8388607;\n    }\n    pcm24s() {\n        const x0 = this.dataView.getUint8(this.pos + 0);\n        const x1 = this.dataView.getUint8(this.pos + 1);\n        const x2 = this.dataView.getUint8(this.pos + 2);\n        const xx = (x0 + (x1 << 8) + (x2 << 16));\n\n        const data = xx > 0x800000 ? xx - 0x1000000 : xx;\n        this.pos += 3;\n        return data / 8388608;\n    }\n    pcm32() {\n        const data = this.dataView.getInt32(this.pos, true);\n        this.pos += 4;\n        return data < 0 ? data / 2147483648 : data / 2147483647;\n    }\n    pcm32s() {\n        const data = this.dataView.getInt32(this.pos, true);\n        this.pos += 4;\n        return data / 2147483648;\n    }\n    pcm32f() {\n        const data = this.dataView.getFloat32(this.pos, true);\n        this.pos += 4;\n        return data;\n    }\n    pcm64f() {\n        const data = this.dataView.getFloat64(this.pos, true);\n        this.pos += 8;\n        return data;\n    }\n}\n\nexport default WavDecoder;\n", "import type { FaustMonoDspInstance, FaustPolyDspInstance, IFaustDspInstance } from \"./FaustDspInstance\";\nimport type { FaustDspMeta, FaustUIDescriptor, FaustUIGroup, FaustUIInputItem, FaustUIItem } from \"./types\";\n\n// Public API\nexport type OutputParamHandler = (path: string, value: number) => void;\nexport type ComputeHandler = (buffer_size: number) => void;\nexport type PlotHandler = (plotted: Float32Array[], index: number, events?: { type: string; data: any }[]) => void;\nexport type MetadataHandler = (key: string, value: string) => void;\n\n// Implementation API\nexport type UIHandler = (item: FaustUIItem) => void;\n\n/**\n * DSP implementation: mimic the C++ 'dsp' class:\n * - adding MIDI control: metadata are decoded and incoming MIDI messages will control the associated controllers\n * - an output handler can be set to treat produced output controllers (like 'bargraph') \n * - regular controllers are handled using setParamValue/getParamValue\n */\nexport interface IFaustBaseWebAudioDsp {\n    /**\n     * Set the parameter output handler, to  be called in the 'compute' method with output parameters (like bargraph).\n     *\n     * @param handler - the output handler\n     */\n    setOutputParamHandler(handler: OutputParamHandler | null): void;\n\n    /**\n     * Get the parameter output handler.\n     *\n     * @return the current output handler\n     */\n    getOutputParamHandler(): OutputParamHandler | null;\n\n    /**\n     * Set the compute handler, to  be called in the 'compute' method with buffer size.\n     *\n     * @param handler - the compute handler\n     */\n    setComputeHandler(handler: ComputeHandler | null): void;\n\n    /**\n     * Get the compute handler.\n     *\n     * @return the current output handler\n     */\n    getComputeHandler(): ComputeHandler | null;\n\n    /**\n     * Set the plot handler, to  be called in the 'compute' method with various info (see PlotHandler type).\n     *\n     * @param handler - the plot handler\n     */\n    setPlotHandler(handler: PlotHandler | null): void;\n\n    /**\n     * Get the plot handler.\n     *\n     * @return the current plot handler\n     */\n    getPlotHandler(): PlotHandler | null;\n\n    /**\n     * Return instance number of audio inputs.\n     *\n     * @return the instance number of audio inputs\n     */\n    getNumInputs(): number;\n\n    /**\n     * Return instance number of audio outputs.\n     *\n     * @return the instance number of audio outputs\n     */\n    getNumOutputs(): number;\n\n    /**\n     * DSP instance computation, to be called with successive input/output audio buffers, using their size.\n     *\n     * @param inputs - the input audio buffers\n     * @param outputs - the output audio buffers\n     */\n    compute(inputs: Float32Array[], outputs: Float32Array[]): boolean;\n\n    /**\n     * Give a handler to be called on 'declare key value' kind of metadata.\n     *\n     * @param handler - the handler to be used\n     */\n    metadata(handler: MetadataHandler): void;\n\n    /**\n     * Handle untyped MIDI messages.\n     *\n     * @param data - and arry of MIDI bytes\n     */\n    midiMessage(data: number[] | Uint8Array): void;\n\n    /**\n     * Handle MIDI ctrlChange messages.\n     *\n     * @param channel - the MIDI channel (0..15, not used for now)\n     * @param ctrl - the MIDI controller number (0..127)\n     * @param value - the MIDI controller value (0..127)\n     */\n    ctrlChange(chan: number, ctrl: number, value: number): void;\n\n    /**\n     * Handle MIDI pitchWheel messages.\n     *\n     * @param channel - the MIDI channel (0..15, not used for now)\n     * @param value - the MIDI controller value (0..16383)\n     */\n    pitchWheel(chan: number, value: number): void;\n\n    /**\n     * Set parameter value.\n     *\n     * @param path - the path to the wanted parameter (retrieved using 'getParams' method)\n     * @param val - the float value for the wanted control\n     */\n    setParamValue(path: string, value: number): void;\n\n    /**\n     * Get parameter value.\n     *\n     * @param path - the path to the wanted parameter (retrieved using 'getParams' method)\n     *\n     * @return the float value\n     */\n    getParamValue(path: string): number;\n\n    /**\n     * Get the table of all input parameters paths.\n     *\n     * @return the table of all input parameters paths\n     */\n    getParams(): string[];\n\n    /**\n     * Get DSP JSON description with its UI and metadata as object.\n     *\n     * @return the DSP JSON description as object\n     */\n    getMeta(): FaustDspMeta;\n\n    /**\n     * Get DSP JSON description with its UI and metadata.\n     *\n     * @return the DSP JSON description\n     */\n    getJSON(): string;\n\n    /**\n     * Get DSP UI description.\n     *\n     * @return the DSP UI description\n     */\n    getUI(): FaustUIDescriptor;\n\n    /**\n    * Get DSP UI items description.\n    *\n    * @return the DSP UI items description\n    */\n    getDescriptors(): FaustUIInputItem[];\n\n    /**\n     * Start the DSP.\n     */\n    start(): void;\n\n    /**\n     * Stop the DSP.\n     */\n    stop(): void;\n\n    /**\n     * Destroy the DSP.\n     */\n    destroy(): void;\n}\n\nexport interface IFaustMonoWebAudioDsp extends IFaustBaseWebAudioDsp {}\nexport interface IFaustMonoWebAudioNode extends IFaustMonoWebAudioDsp, AudioNode {}\n\nexport interface IFaustPolyWebAudioDsp extends IFaustBaseWebAudioDsp {\n    /**\n     * Handle MIDI keyOn messages.\n     *\n     * @param channel - the MIDI channel (0..15, not used for now)\n     * @param pitch - the MIDI pitch value (0..127)\n     * @param velocity - the MIDI velocity value (0..127)\n     */\n    keyOn(channel: number, pitch: number, velocity: number): void;\n\n    /**\n     * Handle MIDI keyOff messages.\n     *\n     * @param channel - the MIDI channel (0..15, not used for now)\n     * @param pitch - the MIDI pitch value (0..127)\n     * @param velocity - the MIDI velocity value (0..127)\n     */\n    keyOff(channel: number, pitch: number, velocity: number): void;\n\n    /**\n     * Stop all playing notes.\n     *\n     * @param hard - whether to immediately stop notes or put them in release mode\n     */\n    allNotesOff(hard: boolean): void;\n}\nexport interface IFaustPolyWebAudioNode extends IFaustPolyWebAudioDsp, AudioNode {}\n\nexport class FaustBaseWebAudioDsp implements IFaustBaseWebAudioDsp {\n    protected fOutputHandler: OutputParamHandler | null;\n    protected fComputeHandler: ComputeHandler | null;\n\n    // To handle MIDI events plot\n    protected fPlotHandler: PlotHandler | null;\n    protected fCachedEvents: { type: string; data: any }[];\n    protected fBufferNum: number;\n\n    protected fInChannels: Float32Array[] | Float64Array[];\n    protected fOutChannels: Float32Array[] | Float64Array[];\n\n    protected fOutputsTimer: number;\n\n    // UI items path\n    protected fInputsItems: string[];\n    protected fOutputsItems: string[];\n    protected fDescriptor: FaustUIInputItem[];\n\n    // Buffers in wasm memory\n    protected fAudioInputs!: number;\n    protected fAudioOutputs!: number;\n\n    protected fBufferSize: number;\n    protected gPtrSize: number;\n    protected gSampleSize: number;\n\n    // MIDI handling\n    protected fPitchwheelLabel: { path: string; min: number; max: number }[];\n    protected fCtrlLabel: { path: string; min: number; max: number }[][];\n    protected fPathTable: { [address: string]: number };\n    protected fUICallback: UIHandler;\n\n    protected fProcessing: boolean;\n\n    protected fDestroyed: boolean;\n\n    protected fJSONDsp!: FaustDspMeta;\n\n    constructor(sampleSize: number, bufferSize: number) {\n        this.fOutputHandler = null;\n        this.fComputeHandler = null;\n\n        // To handle MIDI events plot\n        this.fCachedEvents = [];\n        this.fBufferNum = 0;\n        this.fPlotHandler = null;\n\n        this.fBufferSize = bufferSize;\n\n        this.fInChannels = [];\n        this.fOutChannels = [];\n\n        this.gPtrSize = sampleSize; // Done on wast/wasm backend side\n        this.gSampleSize = sampleSize;\n\n        this.fOutputsTimer = 5;\n        this.fInputsItems = [];\n        this.fOutputsItems = [];\n        this.fDescriptor = [];\n\n        this.fPitchwheelLabel = [];\n        this.fCtrlLabel = new Array(128).fill(null).map(() => []);\n        this.fPathTable = {};\n\n        this.fProcessing = false;\n        this.fDestroyed = false;\n\n        this.fUICallback = (item: FaustUIItem) => {\n            if (item.type === \"hbargraph\" || item.type === \"vbargraph\") {\n                // Keep bargraph adresses\n                this.fOutputsItems.push(item.address);\n                this.fPathTable[item.address] = item.index;\n            } else if (item.type === \"vslider\" || item.type === \"hslider\" || item.type === \"button\" || item.type === \"checkbox\" || item.type === \"nentry\") {\n                // Keep inputs adresses\n                this.fInputsItems.push(item.address);\n                this.fPathTable[item.address] = item.index;\n                this.fDescriptor.push(item);\n                // Parse 'midi' metadata\n                if (!item.meta) return;\n                item.meta.forEach((meta) => {\n                    const { midi } = meta;\n                    if (!midi) return;\n                    const strMidi = midi.trim();\n                    if (strMidi === \"pitchwheel\") {\n                        this.fPitchwheelLabel.push({ path: item.address, min: item.min as number, max: item.max as number });\n                    } else {\n                        const matched = strMidi.match(/^ctrl\\s(\\d+)/);\n                        if (!matched) return;\n                        this.fCtrlLabel[parseInt(matched[1])].push({ path: item.address, min: item.min as number, max: item.max as number });\n                    }\n                });\n            }\n        }\n    }\n\n    // Tools\n    static remap(v: number, mn0: number, mx0: number, mn1: number, mx1: number) {\n        return (v - mn0) / (mx0 - mn0) * (mx1 - mn1) + mn1;\n    }\n\n    // JSON parsing functions\n    static parseUI(ui: FaustUIDescriptor, callback: (...args: any[]) => any) {\n        ui.forEach(group => this.parseGroup(group, callback));\n    }\n\n    static parseGroup(group: FaustUIGroup, callback: (...args: any[]) => any) {\n        if (group.items) {\n            this.parseItems(group.items, callback);\n        }\n    }\n    static parseItems(items: FaustUIItem[], callback: (...args: any[]) => any) {\n        items.forEach(item => this.parseItem(item, callback));\n    }\n\n    static parseItem(item: FaustUIItem, callback: (...args: any[]) => any) {\n        if (item.type === \"vgroup\" || item.type === \"hgroup\" || item.type === \"tgroup\") {\n            this.parseItems(item.items, callback);\n        } else {\n            callback(item);\n        }\n    }\n\n    protected updateOutputs() {\n        if (this.fOutputsItems.length > 0 && this.fOutputHandler && this.fOutputsTimer-- === 0) {\n            this.fOutputsTimer = 5;\n            this.fOutputsItems.forEach(item => { if (this.fOutputHandler) this.fOutputHandler(item, this.getParamValue(item)) });\n        }\n    }\n\n    // Public API\n    metadata(handler: MetadataHandler) {\n        if (this.fJSONDsp.meta) {\n            this.fJSONDsp.meta.forEach(meta => handler(Object.keys(meta)[0], meta[Object.keys(meta)[0]]));\n        }\n    }\n\n    compute(input: Float32Array[], output: Float32Array[]) {\n        return false;\n    }\n\n    setOutputParamHandler(handler: OutputParamHandler | null) {\n        this.fOutputHandler = handler;\n    }\n    getOutputParamHandler() {\n        return this.fOutputHandler;\n    }\n\n    setComputeHandler(handler: ComputeHandler | null) {\n        this.fComputeHandler = handler;\n    }\n    getComputeHandler() {\n        return this.fComputeHandler;\n    }\n\n    setPlotHandler(handler: PlotHandler | null) {\n        this.fPlotHandler = handler;\n    }\n    getPlotHandler() {\n        return this.fPlotHandler;\n    }\n\n    getNumInputs() {\n        return -1;\n    }\n    getNumOutputs() {\n        return -1;\n    }\n\n    midiMessage(data: number[] | Uint8Array) {\n        if (this.fPlotHandler) this.fCachedEvents.push({ data, type: \"midi\" });\n        const cmd = data[0] >> 4;\n        const channel = data[0] & 0xf;\n        const data1 = data[1];\n        const data2 = data[2];\n        if (cmd === 11) return this.ctrlChange(channel, data1, data2);\n        if (cmd === 14) return this.pitchWheel(channel, (data2 * 128.0 + data1));\n    }\n\n    ctrlChange(channel: number, ctrl: number, value: number) {\n        if (this.fPlotHandler) this.fCachedEvents.push({ type: \"ctrlChange\", data: [channel, ctrl, value] });\n        if (this.fCtrlLabel[ctrl].length) {\n            this.fCtrlLabel[ctrl].forEach((ctrl) => {\n                const { path } = ctrl;\n                this.setParamValue(path, FaustBaseWebAudioDsp.remap(value, 0, 127, ctrl.min, ctrl.max));\n                // Typically used to reflect parameter change on GUI\n                if (this.fOutputHandler) this.fOutputHandler(path, this.getParamValue(path));\n            });\n        }\n    }\n\n    pitchWheel(channel: number, wheel: number) {\n        if (this.fPlotHandler) this.fCachedEvents.push({ type: \"pitchWheel\", data: [channel, wheel] });\n        this.fPitchwheelLabel.forEach((pw) => {\n            this.setParamValue(pw.path, FaustBaseWebAudioDsp.remap(wheel, 0, 16383, pw.min, pw.max));\n            // Typically used to reflect parameter change on GUI\n            if (this.fOutputHandler) this.fOutputHandler(pw.path, this.getParamValue(pw.path));\n        });\n    }\n\n    setParamValue(path: string, value: number) { }\n    getParamValue(path: string) { return 0; }\n\n    getParams() { return this.fInputsItems; }\n    getMeta() { return this.fJSONDsp; }\n    getJSON() { return JSON.stringify(this.getMeta()); }\n    getUI() { return this.fJSONDsp.ui; }\n    getDescriptors() { return this.fDescriptor; }\n\n    start() {\n        this.fProcessing = true;\n    }\n\n    stop() {\n        this.fProcessing = false;\n    }\n\n    destroy() {\n        this.fDestroyed = true;\n        this.fOutputHandler = null;\n        this.fComputeHandler = null;\n        this.fPlotHandler = null;\n    }\n}\n\nexport class FaustMonoWebAudioDsp extends FaustBaseWebAudioDsp implements IFaustMonoWebAudioDsp {\n\n    private fInstance: FaustMonoDspInstance;\n    private fDSP!: number;\n\n    constructor(instance: FaustMonoDspInstance, sampleRate: number, sampleSize: number, bufferSize: number) {\n\n        super(sampleSize, bufferSize);\n        this.fInstance = instance;\n\n        // Create JSON object\n        this.fJSONDsp = JSON.parse(this.fInstance.json);\n\n        // Setup GUI\n        FaustBaseWebAudioDsp.parseUI(this.fJSONDsp.ui, this.fUICallback);\n\n        // Setup wasm memory\n        this.initMemory();\n\n        // Init DSP\n        this.fInstance.api.init(this.fDSP, sampleRate);\n    }\n\n    private initMemory() {\n\n        // Start of DSP memory: Mono DSP is placed first with index 0\n        this.fDSP = 0;\n\n        // Audio buffer start at the end of DSP\n        const $audio = this.fJSONDsp.size;\n\n        // Setup audio pointers offset\n        this.fAudioInputs = $audio;\n        this.fAudioOutputs = this.fAudioInputs + this.getNumInputs() * this.gPtrSize;\n\n        // Prepare wasm memory layout\n        const $audioInputs = this.fAudioOutputs + this.getNumOutputs() * this.gPtrSize;\n        const $audioOutputs = $audioInputs + this.getNumInputs() * this.fBufferSize * this.gSampleSize;\n\n        const HEAP = this.fInstance.memory.buffer;\n        const HEAP32 = new Int32Array(HEAP);\n        const HEAPF = (this.gSampleSize === 4) ? new Float32Array(HEAP) : new Float64Array(HEAP);\n\n        if (this.getNumInputs() > 0) {\n            for (let chan = 0; chan < this.getNumInputs(); chan++) {\n                HEAP32[(this.fAudioInputs >> 2) + chan] = $audioInputs + this.fBufferSize * this.gSampleSize * chan;\n            }\n            // Prepare Ins buffer tables\n            const dspInChans = HEAP32.subarray(this.fAudioInputs >> 2, (this.fAudioInputs + this.getNumInputs() * this.gPtrSize) >> 2);\n            for (let chan = 0; chan < this.getNumInputs(); chan++) {\n                this.fInChannels[chan] = HEAPF.subarray(dspInChans[chan] >> Math.log2(this.gSampleSize), (dspInChans[chan] + this.fBufferSize * this.gSampleSize) >> Math.log2(this.gSampleSize));\n            }\n        }\n        if (this.getNumOutputs() > 0) {\n            for (let chan = 0; chan < this.getNumOutputs(); chan++) {\n                HEAP32[(this.fAudioOutputs >> 2) + chan] = $audioOutputs + this.fBufferSize * this.gSampleSize * chan;\n            }\n            // Prepare Out buffer tables\n            const dspOutChans = HEAP32.subarray(this.fAudioOutputs >> 2, (this.fAudioOutputs + this.getNumOutputs() * this.gPtrSize) >> 2);\n            for (let chan = 0; chan < this.getNumOutputs(); chan++) {\n                this.fOutChannels[chan] = HEAPF.subarray(dspOutChans[chan] >> Math.log2(this.gSampleSize), (dspOutChans[chan] + this.fBufferSize * this.gSampleSize) >> Math.log2(this.gSampleSize));\n            }\n        }\n    }\n\n    toString() {\n        return `============== Mono Memory layout ==============\nthis.fBufferSize: ${this.fBufferSize}\nthis.fJSONDsp.size: ${this.fJSONDsp.size}\nthis.fAudioInputs: ${this.fAudioInputs}\nthis.fAudioOutputs: ${this.fAudioOutputs}\nthis.fDSP: ${this.fDSP}`;\n    }\n\n    // Public API\n    compute(input: Float32Array[], output: Float32Array[]) {\n\n        // Check DSP state\n        if (this.fDestroyed) return false;\n\n        // Check Processing state: the node returns 'true' to stay in the graph, even if not processing\n        if (!this.fProcessing) return true;\n\n        // Check inputs\n        if (this.getNumInputs() > 0 && (!input || !input[0] || input[0].length === 0)) {\n            // console.log(\"Process input error\");\n            return true;\n        }\n\n        // Check outputs\n        if (this.getNumOutputs() > 0 && (!output || !output[0] || output[0].length === 0)) {\n            // console.log(\"Process output error\");\n            return true;\n        }\n\n        // Copy inputs\n        if (input !== undefined) {\n            for (let chan = 0; chan < Math.min(this.getNumInputs(), input.length); ++chan) {\n                const dspInput = this.fInChannels[chan];\n                dspInput.set(input[chan]);\n            }\n        }\n\n        // Possibly call an externally given callback (for instance to synchronize playing a MIDIFile...)\n        if (this.fComputeHandler) this.fComputeHandler(this.fBufferSize);\n\n        // Compute\n        this.fInstance.api.compute(this.fDSP, this.fBufferSize, this.fAudioInputs, this.fAudioOutputs);\n\n        // Update bargraph\n        this.updateOutputs();\n\n        if (output !== undefined) {\n            // Copy outputs\n            for (let chan = 0; chan < Math.min(this.getNumOutputs(), output.length); chan++) {\n                const dspOutput = this.fOutChannels[chan];\n                output[chan].set(dspOutput);\n            }\n            // PlotHandler handling \n            if (this.fPlotHandler) {\n                this.fPlotHandler(output, this.fBufferNum++, (this.fCachedEvents.length ? this.fCachedEvents : undefined));\n                this.fCachedEvents = [];\n            }\n        }\n\n        return true;\n    }\n\n    metadata(handler: MetadataHandler) { super.metadata(handler); }\n\n    getNumInputs() {\n        return this.fInstance.api.getNumInputs(this.fDSP);\n    }\n    getNumOutputs() {\n        return this.fInstance.api.getNumOutputs(this.fDSP);\n    }\n\n    setParamValue(path: string, value: number) {\n        if (this.fPlotHandler) this.fCachedEvents.push({ type: \"param\", data: { path, value } });\n        this.fInstance.api.setParamValue(this.fDSP, this.fPathTable[path], value);\n    }\n    getParamValue(path: string) {\n        return this.fInstance.api.getParamValue(this.fDSP, this.fPathTable[path]);\n    }\n\n    getMeta() { return this.fJSONDsp; }\n    getJSON() { return this.fInstance.json; }\n    getDescriptors() { return this.fDescriptor; }\n    getUI() { return this.fJSONDsp.ui; }\n}\n\n\n// Voice management\ninterface TransformFunction { (val: number): number }\n\nexport class FaustWebAudioDspVoice {\n\n    static kActiveVoice: number;\n    static kFreeVoice: number;\n    static kReleaseVoice: number;\n    static kLegatoVoice: number;\n    static kNoVoice: number;\n    static VOICE_STOP_LEVEL: number;\n    private fFreqLabel: number[];\n    private fGateLabel: number[];\n    private fGainLabel: number[];\n    private fDSP: number;         // Voice DSP location in wasm memory\n    private fAPI: IFaustDspInstance; // Voice DSP code\n    private fKeyFun: TransformFunction;\n    private fVelFun: TransformFunction;\n    // Accessed by PolyDSPImp class\n    fCurNote: number;\n    fNextNote: number;\n    fNextVel: number;\n    fDate: number;\n    fLevel: number;\n    fRelease: number;\n\n    constructor($dsp: number, api: IFaustDspInstance, inputItems: string[], pathTable: { [address: string]: number }, sampleRate: number) {\n        // Voice state\n        FaustWebAudioDspVoice.kActiveVoice = 0;\n        FaustWebAudioDspVoice.kFreeVoice = -1;\n        FaustWebAudioDspVoice.kReleaseVoice = -2;\n        FaustWebAudioDspVoice.kLegatoVoice = -3;\n        FaustWebAudioDspVoice.kNoVoice = -4;\n        FaustWebAudioDspVoice.VOICE_STOP_LEVEL = 0.0005;\n        // Default versions\n        this.fKeyFun = (pitch: number) => { return FaustWebAudioDspVoice.midiToFreq(pitch); }\n        this.fVelFun = (velocity: number) => { return velocity / 127.0; }\n        this.fCurNote = FaustWebAudioDspVoice.kFreeVoice;\n        this.fNextNote = this.fNextVel = -1;\n        this.fLevel = 0;\n        this.fDate = this.fRelease = 0;\n        this.fDSP = $dsp;\n        this.fAPI = api;\n        this.fGateLabel = [];\n        this.fGainLabel = [];\n        this.fFreqLabel = [];\n        this.fAPI.init(this.fDSP, sampleRate);\n        this.extractPaths(inputItems, pathTable);\n    }\n\n    static midiToFreq(note: number) { return 440.0 * 2 ** ((note - 69) / 12) }\n\n    private extractPaths(inputItems: string[], pathTable: { [address: string]: number }) {\n        inputItems.forEach((item) => {\n            if (item.endsWith(\"/gate\")) {\n                this.fGateLabel.push(pathTable[item]);\n            } else if (item.endsWith(\"/freq\")) {\n                this.fKeyFun = (pitch: number) => { return FaustWebAudioDspVoice.midiToFreq(pitch); }\n                this.fFreqLabel.push(pathTable[item]);\n            } else if (item.endsWith(\"/key\")) {\n                this.fKeyFun = (pitch: number) => { return pitch; }\n                this.fFreqLabel.push(pathTable[item]);\n            } else if (item.endsWith(\"/gain\")) {\n                this.fVelFun = (velocity: number) => { return velocity / 127.0; }\n                this.fGainLabel.push(pathTable[item]);\n            } else if (item.endsWith(\"/vel\") && item.endsWith(\"/velocity\")) {\n                this.fVelFun = (velocity: number) => { return velocity; }\n                this.fGainLabel.push(pathTable[item]);\n            }\n        });\n    }\n\n    // Public API\n    keyOn(pitch: number, velocity: number, legato: boolean = false) {\n        if (legato) {\n            this.fNextNote = pitch;\n            this.fNextVel = velocity;\n        } else {\n            this.fFreqLabel.forEach(index => this.fAPI.setParamValue(this.fDSP, index, this.fKeyFun(pitch)));\n            this.fGateLabel.forEach(index => this.fAPI.setParamValue(this.fDSP, index, 1));\n            this.fGainLabel.forEach(index => this.fAPI.setParamValue(this.fDSP, index, this.fVelFun(velocity)));\n            // Keep pitch\n            this.fCurNote = pitch;\n        }\n    }\n\n    keyOff(hard: boolean = false) {\n        this.fGateLabel.forEach(index => this.fAPI.setParamValue(this.fDSP, index, 0));\n        if (hard) {\n            this.fCurNote = FaustWebAudioDspVoice.kFreeVoice;\n        } else {\n            this.fRelease = this.fAPI.getSampleRate(this.fDSP) / 2;\n            this.fCurNote = FaustWebAudioDspVoice.kReleaseVoice;\n        }\n    }\n\n    computeLegato(bufferSize: number, $inputs: number, $outputZero: number, $outputsHalf: number) {\n\n        let size = bufferSize / 2;\n\n        // Reset envelops\n        this.fGateLabel.forEach(index => this.fAPI.setParamValue(this.fDSP, index, 0));\n\n        // Compute current voice on half buffer\n        this.fAPI.compute(this.fDSP, size, $inputs, $outputZero);\n\n        // Start next keyOn\n        this.keyOn(this.fNextNote, this.fNextVel);\n\n        // Compute on second half buffer\n        this.fAPI.compute(this.fDSP, size, $inputs, $outputsHalf);\n    }\n\n    compute(bufferSize: number, $inputs: number, $outputs: number) {\n        this.fAPI.compute(this.fDSP, bufferSize, $inputs, $outputs);\n    }\n\n    setParamValue(index: number, value: number) {\n        this.fAPI.setParamValue(this.fDSP, index, value);\n    }\n    getParamValue(index: number) {\n        return this.fAPI.getParamValue(this.fDSP, index);\n    }\n}\n\nexport class FaustPolyWebAudioDsp extends FaustBaseWebAudioDsp implements IFaustPolyWebAudioDsp {\n\n    private fInstance: FaustPolyDspInstance;\n    private fEffect!: number;\n    private fJSONEffect: FaustDspMeta | null;\n    private fAudioMixing!: number;\n    private fAudioMixingHalf!: number;\n    private fVoiceTable: FaustWebAudioDspVoice[];\n\n    constructor(instance: FaustPolyDspInstance, sampleRate: number, sampleSize: number, bufferSize: number) {\n        super(sampleSize, bufferSize);\n        this.fInstance = instance;\n\n        // Create JSON for voice\n        this.fJSONDsp = JSON.parse(this.fInstance.voiceJSON);\n\n        // Create JSON for effect\n        this.fJSONEffect = (this.fInstance.effectAPI && this.fInstance.effectJSON) ? JSON.parse(this.fInstance.effectJSON) : null;\n\n        // Setup GUI\n        FaustBaseWebAudioDsp.parseUI(this.fJSONDsp.ui, this.fUICallback);\n        if (this.fJSONEffect) FaustBaseWebAudioDsp.parseUI(this.fJSONEffect.ui, this.fUICallback);\n\n        // Setup wasm memory\n        this.initMemory();\n\n        // Init DSP voices\n        this.fVoiceTable = [];\n        for (let voice = 0; voice < this.fInstance.voices; voice++) {\n            this.fVoiceTable.push(new FaustWebAudioDspVoice(\n                this.fJSONDsp.size * voice,\n                this.fInstance.voiceAPI,\n                this.fInputsItems,\n                this.fPathTable,\n                sampleRate));\n        }\n\n        // Init effect\n        if (this.fInstance.effectAPI) this.fInstance.effectAPI.init(this.fEffect, sampleRate);\n    }\n\n    private initMemory() {\n\n        // Effet start at the end of all DSP voices\n        this.fEffect = this.fJSONDsp.size * this.fInstance.voices;\n\n        // Audio buffer start at the end of effect\n        const $audio = this.fEffect + (this.fJSONEffect ? this.fJSONEffect.size : 0);\n\n        // Setup audio pointers offset\n        this.fAudioInputs = $audio;\n        this.fAudioOutputs = this.fAudioInputs + this.getNumInputs() * this.gPtrSize;\n        this.fAudioMixing = this.fAudioOutputs + this.getNumOutputs() * this.gPtrSize;\n        this.fAudioMixingHalf = this.fAudioMixing + this.getNumOutputs() * this.gPtrSize;\n\n        // Prepare wasm memory layout\n        const $audioInputs = this.fAudioMixingHalf + this.getNumOutputs() * this.gPtrSize;\n        const $audioOutputs = $audioInputs + this.getNumInputs() * this.fBufferSize * this.gSampleSize;\n        const $audioMixing = $audioOutputs + this.getNumOutputs() * this.fBufferSize * this.gSampleSize;\n\n        const HEAP = this.fInstance.memory.buffer;\n        const HEAP32 = new Int32Array(HEAP);\n        const HEAPF = (this.gSampleSize === 4) ? new Float32Array(HEAP) : new Float64Array(HEAP);\n\n        if (this.getNumInputs() > 0) {\n            for (let chan = 0; chan < this.getNumInputs(); chan++) {\n                HEAP32[(this.fAudioInputs >> 2) + chan] = $audioInputs + this.fBufferSize * this.gSampleSize * chan;\n            }\n            // Prepare Ins buffer tables\n            const dspInChans = HEAP32.subarray(this.fAudioInputs >> 2, (this.fAudioInputs + this.getNumInputs() * this.gPtrSize) >> 2);\n            for (let chan = 0; chan < this.getNumInputs(); chan++) {\n                this.fInChannels[chan] = HEAPF.subarray(dspInChans[chan] >> Math.log2(this.gSampleSize), (dspInChans[chan] + this.fBufferSize * this.gSampleSize) >> Math.log2(this.gSampleSize));\n            }\n        }\n        if (this.getNumOutputs() > 0) {\n            for (let chan = 0; chan < this.getNumOutputs(); chan++) {\n                HEAP32[(this.fAudioOutputs >> 2) + chan] = $audioOutputs + this.fBufferSize * this.gSampleSize * chan;\n                HEAP32[(this.fAudioMixing >> 2) + chan] = $audioMixing + this.fBufferSize * this.gSampleSize * chan;\n                HEAP32[(this.fAudioMixingHalf >> 2) + chan] = $audioMixing + this.fBufferSize * this.gSampleSize * chan + this.fBufferSize / 2 * this.gSampleSize;\n            }\n            // Prepare Out buffer tables\n            const dspOutChans = HEAP32.subarray(this.fAudioOutputs >> 2, (this.fAudioOutputs + this.getNumOutputs() * this.gPtrSize) >> 2);\n            for (let chan = 0; chan < this.getNumOutputs(); chan++) {\n                this.fOutChannels[chan] = HEAPF.subarray(dspOutChans[chan] >> Math.log2(this.gSampleSize), (dspOutChans[chan] + this.fBufferSize * this.gSampleSize) >> Math.log2(this.gSampleSize));\n            }\n        }\n    }\n\n    toString() {\n        return `============== Poly Memory layout ==============\nthis.fBufferSize: ${this.fBufferSize}\nthis.fJSONDsp.size: ${this.fJSONDsp.size}\nthis.fAudioInputs: ${this.fAudioInputs}\nthis.fAudioOutputs: ${this.fAudioOutputs}\nthis.fAudioMixing: ${this.fAudioMixing}\nthis.fAudioMixingHalf: ${this.fAudioMixingHalf}`;\n    }\n\n    private allocVoice(voice: number, type: number) {\n        this.fVoiceTable[voice].fDate++;\n        this.fVoiceTable[voice].fCurNote = type;\n        return voice;\n    }\n\n    private getPlayingVoice(pitch: number) {\n        let voicePlaying = FaustWebAudioDspVoice.kNoVoice;\n        let oldestDatePlaying = Number.MAX_VALUE;\n\n        for (let voice = 0; voice < this.fInstance.voices; voice++) {\n            if (this.fVoiceTable[voice].fCurNote === pitch) {\n                // Keeps oldest playing voice\n                if (this.fVoiceTable[voice].fDate < oldestDatePlaying) {\n                    oldestDatePlaying = this.fVoiceTable[voice].fDate;\n                    voicePlaying = voice;\n                }\n            }\n        }\n        return voicePlaying;\n    }\n\n    private getFreeVoice() {\n        for (let voice = 0; voice < this.fInstance.voices; voice++) {\n            if (this.fVoiceTable[voice].fCurNote === FaustWebAudioDspVoice.kFreeVoice) {\n                return this.allocVoice(voice, FaustWebAudioDspVoice.kActiveVoice);\n            }\n        }\n\n        let voiceRelease = FaustWebAudioDspVoice.kNoVoice;\n        let voicePlaying = FaustWebAudioDspVoice.kNoVoice;\n        let oldestDateRelease = Number.MAX_VALUE;\n        let oldestDatePlaying = Number.MAX_VALUE;\n\n        for (let voice = 0; voice < this.fInstance.voices; voice++) { // Scan all voices\n            // Try to steal a voice in DspVoice.kReleaseVoice mode...\n            if (this.fVoiceTable[voice].fCurNote === FaustWebAudioDspVoice.kReleaseVoice) {\n                // Keeps oldest release voice\n                if (this.fVoiceTable[voice].fDate < oldestDateRelease) {\n                    oldestDateRelease = this.fVoiceTable[voice].fDate;\n                    voiceRelease = voice;\n                }\n            } else if (this.fVoiceTable[voice].fDate < oldestDatePlaying) {\n                oldestDatePlaying = this.fVoiceTable[voice].fDate;\n                voicePlaying = voice;\n            }\n        }\n        // Then decide which one to steal\n        if (oldestDateRelease !== Number.MAX_VALUE) {\n            console.log(`Steal release voice : voice_date = ${this.fVoiceTable[voiceRelease].fDate} voice = ${voiceRelease}`);\n            return this.allocVoice(voiceRelease, FaustWebAudioDspVoice.kLegatoVoice);\n        }\n        if (oldestDatePlaying !== Number.MAX_VALUE) {\n            console.log(`Steal playing voice : voice_date = ${this.fVoiceTable[voicePlaying].fDate} voice = ${voicePlaying}`);\n            return this.allocVoice(voicePlaying, FaustWebAudioDspVoice.kLegatoVoice);\n        }\n        return FaustWebAudioDspVoice.kNoVoice;\n    }\n\n    // Public API\n    compute(input: Float32Array[], output: Float32Array[]) {\n\n        // Check DSP state\n        if (this.fDestroyed) return false;\n\n        // Check Processing state: the node returns 'true' to stay in the graph, even if not processing\n        if (!this.fProcessing) return true;\n\n        // Check inputs\n        if (this.getNumInputs() > 0 && (!input || !input[0] || input[0].length === 0)) {\n            // console.log(\"Process input error\");\n            return true;\n        }\n\n        // Check outputs\n        if (this.getNumOutputs() > 0 && (!output || !output[0] || output[0].length === 0)) {\n            // console.log(\"Process output error\");\n            return true;\n        }\n\n        // Copy inputs\n        if (input !== undefined) {\n            for (let chan = 0; chan < Math.min(this.getNumInputs(), input.length); ++chan) {\n                const dspInput = this.fInChannels[chan];\n                dspInput.set(input[chan]);\n            }\n        }\n\n        // Possibly call an externally given callback (for instance to synchronize playing a MIDIFile...)\n        if (this.fComputeHandler) this.fComputeHandler(this.fBufferSize);\n\n        // Compute\n        this.fInstance.mixerAPI.clearOutput(this.fBufferSize, this.getNumOutputs(), this.fAudioOutputs);\n        this.fVoiceTable.forEach(voice => {\n            if (voice.fCurNote === FaustWebAudioDspVoice.kLegatoVoice) {\n                // Play from current note and next note\n                voice.computeLegato(this.fBufferSize, this.fAudioInputs, this.fAudioMixing, this.fAudioMixingHalf);\n                // FadeOut on first half buffer\n                this.fInstance.mixerAPI.fadeOut(this.fBufferSize / 2, this.getNumOutputs(), this.fAudioMixing);\n                // Mix it in result\n                voice.fLevel = this.fInstance.mixerAPI.mixCheckVoice(this.fBufferSize, this.getNumOutputs(), this.fAudioMixing, this.fAudioOutputs);\n            } else if (voice.fCurNote !== FaustWebAudioDspVoice.kFreeVoice) {\n                // Compute current note\n                voice.compute(this.fBufferSize, this.fAudioInputs, this.fAudioMixing);\n                // Mix it in result\n                voice.fLevel = this.fInstance.mixerAPI.mixCheckVoice(this.fBufferSize, this.getNumOutputs(), this.fAudioMixing, this.fAudioOutputs);\n                // Check the level to possibly set the voice in kFreeVoice again\n                voice.fRelease -= this.fBufferSize;\n                if ((voice.fCurNote == FaustWebAudioDspVoice.kReleaseVoice) && ((voice.fLevel < FaustWebAudioDspVoice.VOICE_STOP_LEVEL) && (voice.fRelease < 0))) {\n                    voice.fCurNote = FaustWebAudioDspVoice.kFreeVoice;\n                }\n            }\n        });\n        if (this.fInstance.effectAPI) this.fInstance.effectAPI.compute(this.fEffect, this.fBufferSize, this.fAudioOutputs, this.fAudioOutputs);\n\n        // Update bargraph\n        this.updateOutputs();\n\n        if (output !== undefined) {\n            // Copy outputs\n            for (let chan = 0; chan < Math.min(this.getNumOutputs(), output.length); chan++) {\n                const dspOutput = this.fOutChannels[chan];\n                output[chan].set(dspOutput);\n            }\n\n            // PlotHandler handling \n            if (this.fPlotHandler) {\n                this.fPlotHandler(output, this.fBufferNum++, (this.fCachedEvents.length ? this.fCachedEvents : undefined));\n                this.fCachedEvents = [];\n            }\n        }\n\n        return true;\n    }\n    getNumInputs() {\n        return this.fInstance.voiceAPI.getNumInputs(0);\n    }\n    getNumOutputs() {\n        return this.fInstance.voiceAPI.getNumOutputs(0);\n    }\n\n    private static findPath(o: any, p: string) {\n        if (typeof o !== \"object\") {\n            return false;\n        } else if (o.address) {\n            return (o.address === p);\n        } else {\n            for (const k in o) {\n                if (FaustPolyWebAudioDsp.findPath(o[k], p)) return true;\n            }\n            return false;\n        }\n    }\n\n    setParamValue(path: string, value: number) {\n        if (this.fPlotHandler) this.fCachedEvents.push({ type: \"param\", data: { path, value } });\n        if (this.fJSONEffect && FaustPolyWebAudioDsp.findPath(this.fJSONEffect.ui, path) && this.fInstance.effectAPI) {\n            this.fInstance.effectAPI.setParamValue(this.fEffect, this.fPathTable[path], value);\n        } else {\n            this.fVoiceTable.forEach(voice => { voice.setParamValue(this.fPathTable[path], value); });\n        }\n    }\n    getParamValue(path: string) {\n        if (this.fJSONEffect && FaustPolyWebAudioDsp.findPath(this.fJSONEffect.ui, path) && this.fInstance.effectAPI) {\n            return this.fInstance.effectAPI.getParamValue(this.fEffect, this.fPathTable[path]);\n        } else {\n            return this.fVoiceTable[0].getParamValue(this.fPathTable[path]);\n        }\n    }\n\n    getMeta() {\n        const o = this.fJSONDsp;\n        const e = this.fJSONEffect;\n        const r = { ...o };\n        if (e) {\n            r.ui = [{\n                type: \"tgroup\", label: \"Sequencer\", items: [\n                    { type: \"vgroup\", label: \"Instrument\", items: o.ui },\n                    { type: \"vgroup\", label: \"Effect\", items: e.ui }\n                ]\n            }];\n        } else {\n            r.ui = [{\n                type: \"tgroup\", label: \"Polyphonic\", items: [\n                    { type: \"vgroup\", label: \"Voices\", items: o.ui }\n                ]\n            }];\n        }\n        return r as FaustDspMeta;\n    }\n\n    getJSON() {\n        return JSON.stringify(this.getMeta());\n    }\n\n    getUI() {\n        return this.getMeta().ui;\n    }\n\n    getDescriptors() { return this.fDescriptor; }\n\n    midiMessage(data: number[] | Uint8Array) {\n        const cmd = data[0] >> 4;\n        const channel = data[0] & 0xf;\n        const data1 = data[1];\n        const data2 = data[2];\n        if (cmd === 8 || (cmd === 9 && data2 === 0)) return this.keyOff(channel, data1, data2);\n        else if (cmd === 9) return this.keyOn(channel, data1, data2);\n        else super.midiMessage(data);\n    };\n\n    ctrlChange(channel: number, ctrl: number, value: number) {\n        if (ctrl === 123 || ctrl === 120) {\n            this.allNotesOff(true);\n        } else {\n            super.ctrlChange(channel, ctrl, value);\n        }\n    }\n\n    keyOn(channel: number, pitch: number, velocity: number) {\n        const voice = this.getFreeVoice();\n        this.fVoiceTable[voice].keyOn(pitch, velocity, this.fVoiceTable[voice].fCurNote == FaustWebAudioDspVoice.kLegatoVoice);\n    }\n\n    keyOff(channel: number, pitch: number, velocity: number) {\n        const voice = this.getPlayingVoice(pitch);\n        if (voice !== FaustWebAudioDspVoice.kNoVoice) {\n            this.fVoiceTable[voice].keyOff();\n        } else {\n            console.log(\"Playing pitch = %d not found\\n\", pitch);\n        }\n    }\n\n    allNotesOff(hard: boolean = true) {\n        this.fCachedEvents.push({ type: \"ctrlChange\", data: [0, 123, 0] });\n        this.fVoiceTable.forEach(voice => voice.keyOff(hard));\n    }\n}\n", "import { OutputParamHandler, ComputeHandler, PlotHandler, UIHandler, MetadataHandler, FaustBaseWebAudioDsp, IFaustMonoWebAudioDsp, IFaustPolyWebAudioDsp } from \"./FaustWebAudioDsp\";\nimport type { FaustAudioWorkletNodeOptions } from \"./FaustAudioWorkletProcessor\";\nimport type { LooseFaustDspFactory, FaustDspMeta, FaustUIInputItem, FaustUIItem } from \"./types\";\n\n/**\n * Base class for Monophonic and Polyphonic AudioWorkletNode\n */\nexport class FaustAudioWorkletNode<Poly extends boolean = false> extends (globalThis.AudioWorkletNode || null) {\n\n    protected fJSONDsp: FaustDspMeta;\n    protected fJSON: string;\n    protected fInputsItems: string[];\n    protected fOutputHandler: OutputParamHandler | null;\n    protected fComputeHandler: ComputeHandler | null;\n    protected fPlotHandler: PlotHandler | null;\n    protected fUICallback: UIHandler;\n    protected fDescriptor: FaustUIInputItem[];\n\n    constructor(context: BaseAudioContext, name: string, factory: LooseFaustDspFactory, options: FaustAudioWorkletNodeOptions<Poly>[\"processorOptions\"]) {\n\n        // Create JSON object\n        const JSONObj: FaustDspMeta = JSON.parse(factory.json);\n\n        // Create proxy FaustAudioWorkletProcessor\n        super(context, name, {\n            numberOfInputs: JSONObj.inputs > 0 ? 1 : 0,\n            numberOfOutputs: JSONObj.outputs > 0 ? 1 : 0,\n            channelCount: Math.max(1, JSONObj.inputs),\n            outputChannelCount: [JSONObj.outputs],\n            channelCountMode: \"explicit\",\n            channelInterpretation: \"speakers\",\n            processorOptions: options\n        });\n\n        this.fJSONDsp = JSONObj;\n        this.fJSON = factory.json;\n        this.fOutputHandler = null;\n        this.fComputeHandler = null;\n        this.fPlotHandler = null;\n        this.fDescriptor = [];\n\n        // Parse UI\n        this.fInputsItems = [];\n        this.fUICallback = (item: FaustUIItem) => {\n            if (item.type === \"vslider\" || item.type === \"hslider\" || item.type === \"button\" || item.type === \"checkbox\" || item.type === \"nentry\") {\n                // Keep inputs adresses\n                this.fInputsItems.push(item.address);\n                this.fDescriptor.push(item);\n            }\n        }\n        FaustBaseWebAudioDsp.parseUI(this.fJSONDsp.ui, this.fUICallback);\n\n        // Patch it with additional functions\n        this.port.onmessage = (e: MessageEvent) => {\n            if (e.data.type === \"param\" && this.fOutputHandler) {\n                this.fOutputHandler(e.data.path, e.data.value);\n            } else if (e.data.type === \"plot\" && this.fPlotHandler) {\n                this.fPlotHandler(e.data.value, e.data.index, e.data.events);\n            }\n        };\n    }\n\n    // Public API\n    setOutputParamHandler(handler: OutputParamHandler | null) {\n        this.fOutputHandler = handler;\n    }\n    getOutputParamHandler() {\n        return this.fOutputHandler;\n    }\n\n    setComputeHandler(handler: ComputeHandler | null) {\n        this.fComputeHandler = handler;\n    }\n    getComputeHandler(): ComputeHandler | null {\n        return this.fComputeHandler;\n    }\n\n    setPlotHandler(handler: PlotHandler | null) {\n        this.fPlotHandler = handler;\n        // Set PlotHandler on processor side\n        if (this.fPlotHandler) {\n            this.port.postMessage({ type: \"setPlotHandler\", data: true });\n        } else {\n            this.port.postMessage({ type: \"setPlotHandler\", data: false });\n        }\n    }\n    getPlotHandler(): PlotHandler | null {\n        return this.fPlotHandler;\n    }\n\n    getNumInputs() {\n        return this.fJSONDsp.inputs;\n    }\n    getNumOutputs() {\n        return this.fJSONDsp.outputs;\n    }\n\n    // Implemented in subclasses\n    compute(inputs: Float32Array[], outputs: Float32Array[]) {\n        return false;\n    }\n\n    metadata(handler: MetadataHandler) {\n        if (this.fJSONDsp.meta) {\n            this.fJSONDsp.meta.forEach(meta => handler(Object.keys(meta)[0], meta[Object.keys(meta)[0]]));\n        }\n    }\n\n    midiMessage(data: number[] | Uint8Array): void {\n        const cmd = data[0] >> 4;\n        const channel = data[0] & 0xf;\n        const data1 = data[1];\n        const data2 = data[2];\n        if (cmd === 11) this.ctrlChange(channel, data1, data2);\n        else if (cmd === 14) this.pitchWheel(channel, data2 * 128.0 + data1);\n        else this.port.postMessage({ type: \"midi\", data: data });\n    }\n\n    ctrlChange(channel: number, ctrl: number, value: number) {\n        const e = { type: \"ctrlChange\", data: [channel, ctrl, value] };\n        this.port.postMessage(e);\n    }\n    pitchWheel(channel: number, wheel: number) {\n        const e = { type: \"pitchWheel\", data: [channel, wheel] };\n        this.port.postMessage(e);\n    }\n\n    setParamValue(path: string, value: number) {\n        const e = { type: \"param\", data: { path, value } };\n        this.port.postMessage(e);\n        // Set value on AudioParam (but this is not used on Processor side for now)\n        const param = this.parameters.get(path);\n        if (param) param.setValueAtTime(value, this.context.currentTime);\n\n    }\n    getParamValue(path: string) {\n        // Get value of AudioParam\n        const param = this.parameters.get(path);\n        return (param) ? param.value : 0;\n    }\n\n    getParams() { return this.fInputsItems; }\n    getMeta() { return this.fJSONDsp; }\n    getJSON() { return JSON.stringify(this.getMeta()); }\n    getUI() { return this.fJSONDsp.ui; }\n    getDescriptors() { return this.fDescriptor; }\n\n    start() {\n        this.port.postMessage({ type: \"start\" });\n    }\n\n    stop() {\n        this.port.postMessage({ type: \"stop\" });\n    }\n\n    destroy() {\n        this.port.postMessage({ type: \"destroy\" });\n        this.port.close();\n    }\n}\n\n/**\n * Monophonic AudioWorkletNode\n */\nexport class FaustMonoAudioWorkletNode extends FaustAudioWorkletNode<false> implements IFaustMonoWebAudioDsp {\n\n    onprocessorerror = (e: Event) => {\n        console.error(\"Error from \" + this.fJSONDsp.name + \" FaustMonoAudioWorkletNode\");\n        throw e;\n    }\n\n    constructor(context: BaseAudioContext, name: string, factory: LooseFaustDspFactory, sampleSize: number) {\n        super(context, name, factory, { name, factory, sampleSize });\n    }\n}\n\n/**\n * Polyphonic AudioWorkletNode\n */\nexport class FaustPolyAudioWorkletNode extends FaustAudioWorkletNode<true> implements IFaustPolyWebAudioDsp {\n\n    private fJSONEffect: FaustDspMeta | null;\n\n    onprocessorerror = (e: Event) => {\n        console.error(\"Error from \" + this.fJSONDsp.name + \" FaustPolyAudioWorkletNode\");\n        throw e;\n    }\n\n    constructor(context: BaseAudioContext,\n        name: string,\n        voiceFactory: LooseFaustDspFactory,\n        mixerModule: WebAssembly.Module,\n        voices: number,\n        sampleSize: number,\n        effectFactory?: LooseFaustDspFactory) {\n\n        super(context, name, voiceFactory,\n            {\n                name,\n                voiceFactory,\n                mixerModule,\n                voices,\n                sampleSize,\n                effectFactory\n            });\n\n        this.fJSONEffect = effectFactory ? JSON.parse(effectFactory.json) : null;\n\n        if (this.fJSONEffect) {\n            FaustBaseWebAudioDsp.parseUI(this.fJSONEffect.ui, this.fUICallback);\n        }\n    }\n\n    // Public API\n    keyOn(channel: number, pitch: number, velocity: number) {\n        const e = { type: \"keyOn\", data: [channel, pitch, velocity] };\n        this.port.postMessage(e);\n    }\n\n    keyOff(channel: number, pitch: number, velocity: number) {\n        const e = { type: \"keyOff\", data: [channel, pitch, velocity] };\n        this.port.postMessage(e);\n    }\n\n    allNotesOff(hard: boolean) {\n        const e = { type: \"ctrlChange\", data: [0, 123, 0] };\n        this.port.postMessage(e);\n    }\n\n    getMeta() {\n        const o = this.fJSONDsp;\n        const e = this.fJSONEffect;\n        const r = { ...o };\n        if (e) {\n            r.ui = [{\n                type: \"tgroup\", label: \"Sequencer\", items: [\n                    { type: \"vgroup\", label: \"Instrument\", items: o.ui },\n                    { type: \"vgroup\", label: \"Effect\", items: e.ui }\n                ]\n            }];\n        } else {\n            r.ui = [{\n                type: \"tgroup\", label: \"Polyphonic\", items: [\n                    { type: \"vgroup\", label: \"Voices\", items: o.ui }\n                ]\n            }];\n        }\n        return r as FaustDspMeta;\n    }\n\n    getJSON() {\n        return JSON.stringify(this.getMeta());\n    }\n\n    getUI() {\n        return this.getMeta().ui;\n    }\n}\n", "import type { ComputeHandler, FaustMonoWebAudioDsp, FaustPolyWebAudioDsp, IFaustMonoWebAudioDsp, IFaustPolyWebAudioDsp, MetadataHandler, OutputParamHandler, PlotHandler } from \"./FaustWebAudioDsp\";\n\n/**\n * Base class for Monophonic and Polyphonic ScriptProcessorNode\n */\nexport class FaustScriptProcessorNode<Poly extends boolean = false> extends (globalThis.ScriptProcessorNode || null) {\n    protected fDSPCode!: Poly extends true ? FaustPolyWebAudioDsp : FaustMonoWebAudioDsp;\n\n    // Needed for ScriptProcessorNode\n    protected fInputs!: Float32Array[];\n    protected fOutputs!: Float32Array[];\n\n    init(instance: Poly extends true ? FaustPolyWebAudioDsp : FaustMonoWebAudioDsp) {\n        this.fDSPCode = instance;\n\n        this.fInputs = new Array(this.fDSPCode.getNumInputs());\n        this.fOutputs = new Array(this.fDSPCode.getNumOutputs());\n\n        this.onaudioprocess = (e) => {\n\n            // Read inputs\n            for (let chan = 0; chan < this.fDSPCode.getNumInputs(); chan++) {\n                this.fInputs[chan] = e.inputBuffer.getChannelData(chan);\n            }\n\n            // Read outputs\n            for (let chan = 0; chan < this.fDSPCode.getNumOutputs(); chan++) {\n                this.fOutputs[chan] = e.outputBuffer.getChannelData(chan);\n            }\n\n            return this.fDSPCode.compute(this.fInputs, this.fOutputs);\n        }\n\n        this.start();\n    }\n    // Public API\n    compute(input: Float32Array[], output: Float32Array[]) { return this.fDSPCode.compute(input, output); }\n\n    setOutputParamHandler(handler: OutputParamHandler) { this.fDSPCode.setOutputParamHandler(handler); }\n    getOutputParamHandler() { return this.fDSPCode.getOutputParamHandler(); }\n\n    setComputeHandler(handler: ComputeHandler) { this.fDSPCode.setComputeHandler(handler); }\n    getComputeHandler() { return this.fDSPCode.getComputeHandler(); }\n\n    setPlotHandler(handler: PlotHandler) { this.fDSPCode.setPlotHandler(handler); }\n    getPlotHandler() { return this.fDSPCode.getPlotHandler(); }\n\n    getNumInputs() { return this.fDSPCode.getNumInputs(); }\n    getNumOutputs() { return this.fDSPCode.getNumOutputs(); }\n\n    metadata(handler: MetadataHandler) { }\n\n    midiMessage(data: number[] | Uint8Array) { this.fDSPCode.midiMessage(data); }\n\n    ctrlChange(chan: number, ctrl: number, value: number) { this.fDSPCode.ctrlChange(chan, ctrl, value); }\n    pitchWheel(chan: number, value: number) { this.fDSPCode.pitchWheel(chan, value); }\n\n    setParamValue(path: string, value: number) { this.fDSPCode.setParamValue(path, value); }\n    getParamValue(path: string) { return this.fDSPCode.getParamValue(path); }\n    getParams() { return this.fDSPCode.getParams(); }\n\n    getMeta() { return this.fDSPCode.getMeta(); }\n    getJSON() { return this.fDSPCode.getJSON(); }\n    getDescriptors() { return this.fDSPCode.getDescriptors(); }\n    getUI() { return this.fDSPCode.getUI(); }\n\n    start() { this.fDSPCode.start(); }\n    stop() { this.fDSPCode.stop(); }\n\n    destroy() { this.fDSPCode.destroy(); }\n}\n\nexport class FaustMonoScriptProcessorNode extends FaustScriptProcessorNode<false> implements IFaustMonoWebAudioDsp {\n}\n\nexport class FaustPolyScriptProcessorNode extends FaustScriptProcessorNode<true> implements IFaustPolyWebAudioDsp {\n    keyOn(channel: number, pitch: number, velocity: number) { this.fDSPCode.keyOn(channel, pitch, velocity); }\n    keyOff(channel: number, pitch: number, velocity: number) { this.fDSPCode.keyOff(channel, pitch, velocity); }\n    allNotesOff(hard: boolean) { this.fDSPCode.allNotesOff(hard); }\n}\n", "import { FaustMonoAudioWorkletNode, FaustPolyAudioWorkletNode } from \"./FaustAudioWorkletNode\";\nimport getFaustAudioWorkletProcessor, { FaustData } from \"./FaustAudioWorkletProcessor\";\nimport FaustDspInstance from \"./FaustDspInstance\";\nimport FaustWasmInstantiator from \"./FaustWasmInstantiator\";\nimport FaustOfflineProcessor, { IFaustOfflineProcessor } from \"./FaustOfflineProcessor\";\nimport { FaustMonoScriptProcessorNode, FaustPolyScriptProcessorNode } from \"./FaustScriptProcessorNode\";\nimport { FaustBaseWebAudioDsp, FaustMonoWebAudioDsp, FaustPolyWebAudioDsp, FaustWebAudioDspVoice, IFaustMonoWebAudioNode, IFaustPolyWebAudioNode } from \"./FaustWebAudioDsp\";\nimport type { IFaustCompiler } from \"./FaustCompiler\";\nimport type { FaustDspFactory, FaustDspMeta, LooseFaustDspFactory } from \"./types\";\n\nexport interface IFaustMonoDspGenerator {\n    /**\n     * Compile a monophonic DSP factory from given code.\n     * \n     * @param compiler - the Faust compiler\n     * @param name - the DSP name\n     * @param code - the DSP code\n     * @param args - the compilation parameters\n     * @returns the compiled factory or 'null' if failure\n     */\n    compile(compiler: IFaustCompiler, name: string, code: string, args: string): Promise<{\n        factory: FaustDspFactory | null;\n        name?: string;\n        meta?: FaustDspMeta;\n    } | null>;\n\n    /**\n     * Create a monophonic WebAudio node (either ScriptProcessorNode or AudioWorkletNode).\n     *\n     * @param context - the WebAudio context\n     * @param name - AudioWorklet Processor name\n     * @param factory - default is the compiled factory\n     * @param sp - whether to compile a ScriptProcessorNode or an AudioWorkletNode\n     * @param bufferSize - the buffer size in frames to be used in ScriptProcessorNode only, since AudioWorkletNode always uses 128 frames  \n     * @returns the compiled WebAudio node or 'null' if failure\n    */\n    createNode(\n        context: BaseAudioContext,\n        name?: string,\n        factory?: LooseFaustDspFactory,\n        sp?: boolean,\n        bufferSize?: number\n    ): Promise<IFaustMonoWebAudioNode | null>;\n\n    /**\n    * Create a monophonic Offline processor.\n    *\n    * @param sampleRate - the sample rate in Hz\n    * @param bufferSize - the buffer size in frames\n    * @param factory - default is the compiled factory\n    * @returns the compiled processor or 'null' if failure\n    */\n    createOfflineProcessor(sampleRate: number, bufferSize: number, factory?: LooseFaustDspFactory, meta?: FaustDspMeta): Promise<IFaustOfflineProcessor | null>;\n}\n\nexport interface IFaustPolyDspGenerator {\n    /**\n     * Compile a monophonic DSP factory from given code.\n     * \n     * @param compiler - the Faust compiler\n     * @param name - the DSP name\n     * @param dspCode - the DSP code ('dsp_code' can possibly contain an integrated effect)\n     * @param args - the compilation parameters\n     * @param effectCode - optional effect DSP code\n     * @returns the compiled factory or 'null' if failure\n     */\n    compile(compiler: IFaustCompiler, name: string, dspCode: string, args: string, effectCode?: string): Promise<{\n        voiceFactory: FaustDspFactory | null;\n        effectFactory?: FaustDspFactory | null;\n    } | null>;\n    /**\n     * Create a polyphonic WebAudio node (either ScriptProcessorNode or AudioWorkletNode).\n     *\n     * @param context the WebAudio context\n     * @param voices - the number of voices\n     * @param name - AudioWorklet Processor name\n     * @param voiceFactory - the Faust factory for voices, either obtained with a compiler (createDSPFactory) or loaded from files (loadDSPFactory)\n     * @param mixerModule - the wasm Mixer module (loaded from 'mixer32.wasm' or 'mixer64.wasm' files)\n     * @param effectFactory - the Faust factory for the effect, either obtained with a compiler (createDSPFactory) or loaded from files (loadDSPFactory)\n     * @param sp - whether to compile a ScriptProcessorNode or an AudioWorkletNode\n     * @param bufferSize - the buffer size in frames to be used in ScriptProcessorNode only, since AudioWorkletNode always uses 128 frames\n     * @returns the compiled WebAudio node or 'null' if failure\n     */\n    createNode(\n        context: BaseAudioContext,\n        voices: number,\n        name?: string,\n        voiceFactory?: LooseFaustDspFactory,\n        mixerModule?: WebAssembly.Module,\n        effectFactory?: LooseFaustDspFactory | null,\n        sp?: boolean,\n        bufferSize?: number\n    ): Promise<IFaustPolyWebAudioNode | null>;\n\n}\n\nexport class FaustMonoDspGenerator implements IFaustMonoDspGenerator {\n    // Set of all created WorkletProcessors, each of them has to be unique\n    private static gWorkletProcessors: Set<string> = new Set();\n\n    name: string;\n    factory!: FaustDspFactory | null;\n\n    constructor() {\n        this.factory = null;\n    }\n    async compile(compiler: IFaustCompiler, name: string, code: string, args: string) {\n        this.factory = await compiler.createMonoDSPFactory(name, code, args);\n        if (!this.factory) return null;\n        this.name = name + this.factory.cfactory.toString();\n        return this;\n    }\n\n    async createNode<SP extends boolean = false>(\n        context: BaseAudioContext,\n        name = this.name,\n        factory = this.factory as LooseFaustDspFactory,\n        sp = false as SP,\n        bufferSize = 1024\n    ): Promise<SP extends true ? FaustMonoScriptProcessorNode | null : FaustMonoAudioWorkletNode | null> {\n        if (!factory) throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");\n\n        const meta = JSON.parse(factory.json);\n        const sampleSize = meta.compile_options.match(\"-double\") ? 8 : 4;\n        if (sp) {\n            const instance = await FaustWasmInstantiator.createAsyncMonoDSPInstance(factory);\n            const monoDsp = new FaustMonoWebAudioDsp(instance, context.sampleRate, sampleSize, bufferSize);\n            const sp = context.createScriptProcessor(bufferSize, monoDsp.getNumInputs(), monoDsp.getNumOutputs()) as FaustMonoScriptProcessorNode;\n            Object.setPrototypeOf(sp, FaustMonoScriptProcessorNode.prototype);\n            sp.init(monoDsp);\n            return sp as SP extends true ? FaustMonoScriptProcessorNode : FaustMonoAudioWorkletNode;\n        } else {\n            // Dynamically create AudioWorkletProcessor if code not yet created\n            if (!FaustMonoDspGenerator.gWorkletProcessors.has(name)) {\n                try {\n                    const processorCode = `\n// DSP name and JSON string for DSP are generated\nconst faustData = ${JSON.stringify({\n    dspName: name,\n    dspMeta: meta,\n    poly: false\n} as FaustData)};\n// Implementation needed classes of functions\nconst ${FaustDspInstance.name}_default = ${FaustDspInstance.toString()}\nconst ${FaustBaseWebAudioDsp.name} = ${FaustBaseWebAudioDsp.toString()}\nconst ${FaustMonoWebAudioDsp.name} = ${FaustMonoWebAudioDsp.toString()}\nconst ${FaustWasmInstantiator.name} = ${FaustWasmInstantiator.toString()}\n// Put them in dependencies\nconst dependencies = {\n    ${FaustBaseWebAudioDsp.name},\n    ${FaustMonoWebAudioDsp.name},\n    ${FaustWasmInstantiator.name}\n};\n// Generate the actual AudioWorkletProcessor code\n(${getFaustAudioWorkletProcessor.toString()})(dependencies, faustData);\n`;\n                    const url = URL.createObjectURL(new Blob([processorCode], { type: \"text/javascript\" }));\n                    await context.audioWorklet.addModule(url);\n                    // Keep the DSP name\n                    FaustMonoDspGenerator.gWorkletProcessors.add(name);\n                } catch (e) {\n                    console.error(`=> exception raised while running createMonoNode: ${e}`);\n                    console.error(`=> check that your page is served using https.${e}`);\n                    return null;\n                }\n            }\n            // Create the AWN\n            const node = new FaustMonoAudioWorkletNode(context, name, factory, sampleSize)\n            return node as SP extends true ? FaustMonoScriptProcessorNode : FaustMonoAudioWorkletNode;\n        }\n    }\n    async createOfflineProcessor(\n        sampleRate: number,\n        bufferSize: number,\n        factory = this.factory as LooseFaustDspFactory,\n    ): Promise<IFaustOfflineProcessor | null> {\n        if (!factory) throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");\n\n        const meta = JSON.parse(factory.json);\n        const instance = await FaustWasmInstantiator.createAsyncMonoDSPInstance(factory);\n        const sampleSize = meta.compile_options.match(\"-double\") ? 8 : 4;\n        const monoDsp = new FaustMonoWebAudioDsp(instance, sampleRate, sampleSize, bufferSize);\n        return new FaustOfflineProcessor(monoDsp, bufferSize);\n    }\n}\n\nexport class FaustPolyDspGenerator implements IFaustPolyDspGenerator {\n    // Set of all created WorkletProcessors, each of them has to be unique\n    private static gWorkletProcessors: Set<string> = new Set();\n\n    name: string;\n    voiceFactory!: FaustDspFactory | null;\n    effectFactory!: FaustDspFactory | null;\n    mixerBuffer!: Uint8Array;\n    mixerModule!: WebAssembly.Module;\n\n    constructor() {\n        this.voiceFactory = null;\n        this.effectFactory = null;\n    }\n    async compile(\n        compiler: IFaustCompiler,\n        name: string,\n        dspCode: string,\n        args: string,\n        effectCode = `\nadapt(1,1) = _; adapt(2,2) = _,_; adapt(1,2) = _ <: _,_; adapt(2,1) = _,_ :> _;\nadaptor(F,G) = adapt(outputs(F),inputs(G));\ndsp_code = environment{${dspCode}};\nprocess = adaptor(dsp_code.process, dsp_code.effect) : dsp_code.effect;`\n    ) {\n        this.voiceFactory = await compiler.createPolyDSPFactory(name, dspCode, args);\n        if (!this.voiceFactory) return null;\n        // Compile effect, possibly failing since 'compilePolyNode2' can be called by called by 'compilePolyNode'\n        this.effectFactory = await compiler.createPolyDSPFactory(name, effectCode, args);\n        this.name = name + this.voiceFactory.cfactory.toString() + \"_poly\";\n        const voiceMeta = JSON.parse(this.voiceFactory.json);\n        const isDouble = voiceMeta.compile_options.match(\"-double\");\n        const { mixerBuffer, mixerModule, } = await compiler.getAsyncInternalMixerModule(!!isDouble);\n        this.mixerBuffer = mixerBuffer;\n        this.mixerModule = mixerModule;\n        return this;\n    }\n\n    async createNode<SP extends boolean = false>(\n        context: BaseAudioContext,\n        voices: number,\n        name = this.name,\n        voiceFactory = this.voiceFactory as LooseFaustDspFactory,\n        mixerModule = this.mixerModule,\n        effectFactory = this.effectFactory as LooseFaustDspFactory | null,\n        sp = false as SP,\n        bufferSize = 1024\n    ): Promise<SP extends true ? FaustPolyScriptProcessorNode | null : FaustPolyAudioWorkletNode | null> {\n        if (!voiceFactory) throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");\n\n        const voiceMeta = JSON.parse(voiceFactory.json);\n        const effectMeta = effectFactory ? JSON.parse(effectFactory.json) : undefined;\n        const sampleSize = voiceMeta.compile_options.match(\"-double\") ? 8 : 4;\n        if (sp) {\n            const instance = await FaustWasmInstantiator.createAsyncPolyDSPInstance(voiceFactory, mixerModule, voices, effectFactory || undefined);\n            const polyDsp = new FaustPolyWebAudioDsp(instance, context.sampleRate, sampleSize, bufferSize);\n            const sp = context.createScriptProcessor(bufferSize, polyDsp.getNumInputs(), polyDsp.getNumOutputs()) as FaustPolyScriptProcessorNode;\n            Object.setPrototypeOf(sp, FaustPolyScriptProcessorNode.prototype);\n            sp.init(polyDsp);\n            return sp as SP extends true ? FaustPolyScriptProcessorNode : FaustPolyAudioWorkletNode;\n        } else {\n            // Dynamically create AudioWorkletProcessor if code not yet created\n            if (!FaustPolyDspGenerator.gWorkletProcessors.has(name)) {\n                try {\n                    const processorCode = `\n// DSP name and JSON string for DSP are generated\nconst faustData = ${JSON.stringify({\n    dspName: name,\n    dspMeta: voiceMeta,\n    poly: true,\n    effectMeta\n} as FaustData)};\n// Implementation needed classes of functions\nconst ${FaustDspInstance.name}_default = ${FaustDspInstance.toString()}\nconst ${FaustBaseWebAudioDsp.name} = ${FaustBaseWebAudioDsp.toString()}\nconst ${FaustPolyWebAudioDsp.name} = ${FaustPolyWebAudioDsp.toString()}\nconst ${FaustWebAudioDspVoice.name} = ${FaustWebAudioDspVoice.toString()}\nconst ${FaustWasmInstantiator.name} = ${FaustWasmInstantiator.toString()}\n// Put them in dependencies\nconst dependencies = {\n    ${FaustBaseWebAudioDsp.name},\n    ${FaustPolyWebAudioDsp.name},\n    ${FaustWasmInstantiator.name}\n};\n// Generate the actual AudioWorkletProcessor code\n(${getFaustAudioWorkletProcessor.toString()})(dependencies, faustData);\n`;\n                    const url = URL.createObjectURL(new Blob([processorCode], { type: \"text/javascript\" }));\n                    await context.audioWorklet.addModule(url);\n                    // Keep the DSP name\n                    FaustPolyDspGenerator.gWorkletProcessors.add(name);\n                } catch (e) {\n                    console.error(`=> exception raised while running createMonoNode: ${e}`);\n                    console.error(`=> check that your page is served using https.${e}`);\n                    return null;\n                }\n            }\n            // Create the AWN\n            const node = new FaustPolyAudioWorkletNode(context, name, voiceFactory, mixerModule, voices, sampleSize, effectFactory || undefined);\n            return node as SP extends true ? FaustPolyScriptProcessorNode : FaustPolyAudioWorkletNode;\n        }\n    }\n}\n", "import instantiateFaustModule from \"./instantiateFaustModule\";\nimport getFaustAudioWorkletProcessor from \"./FaustAudioWorkletProcessor\";\nimport FaustCompiler from \"./FaustCompiler\";\nimport FaustDspInstance from \"./FaustDspInstance\";\nimport FaustWasmInstantiator from \"./FaustWasmInstantiator\";\nimport FaustOfflineProcessor from \"./FaustOfflineProcessor\";\nimport FaustSvgDiagrams from \"./FaustSvgDiagrams\";\nimport LibFaust from \"./LibFaust\";\nimport WavEncoder from \"./WavEncoder\";\nimport WavDecoder from \"./WavDecoder\";\n\nexport * from \"./FaustAudioWorkletNode\";\nexport * from \"./FaustAudioWorkletProcessor\";\nexport * from \"./FaustCompiler\";\nexport * from \"./FaustDspInstance\";\nexport * from \"./FaustOfflineProcessor\";\nexport * from \"./FaustScriptProcessorNode\";\nexport * from \"./FaustWebAudioDsp\";\nexport * from \"./FaustDspGenerator\";\nexport * from \"./LibFaust\";\n\nexport * from \"./types\";\n\nexport {\n    instantiateFaustModule,\n    getFaustAudioWorkletProcessor,\n    FaustDspInstance,\n    FaustCompiler,\n    FaustWasmInstantiator,\n    FaustOfflineProcessor,\n    FaustSvgDiagrams,\n    LibFaust,\n    WavEncoder,\n    WavDecoder,\n};\n\nexport default {\n    instantiateFaustModule,\n    getFaustAudioWorkletProcessor,\n    FaustDspInstance,\n    FaustCompiler,\n    FaustWasmInstantiator,\n    FaustOfflineProcessor,\n    FaustSvgDiagrams,\n    LibFaust,\n    WavEncoder,\n    WavDecoder,\n};\n"],
  "mappings": "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",
  "names": []
}
